/* Settings Panel */
.settings-panel .settings-body { padding:8px 16px 105px; display:flex; flex-direction:column; gap:0; flex:1; overflow:hidden; position:relative; }
.settings-panel .settings-tabs { display:flex; gap:6px; padding:8px 12px 6px; border-bottom:1px solid #222; flex-wrap:wrap; }
.settings-panel .settings-tabs .tab-btn { background:#1a1a1a; border:1px solid #2c2c2c; color:var(--text-dim); padding:4px 10px; border-radius:4px; font-size:11px; letter-spacing:.5px; cursor:pointer; }
.settings-panel .settings-tabs .tab-btn.active { color:var(--text); border-color:#3a3a3a; background:#202020; }
.settings-panel .settings-tabs .tab-btn:focus { border-color:var(--accent); }
.settings-panel form { display:flex; flex-direction:column; gap:18px; flex:1; }
.settings-panel .settings-columns { display:grid; grid-template-columns: 1fr 1fr; gap:24px 32px; align-items:start; }
.settings-panel .settings-columns .col { display:flex; flex-direction:column; gap:14px; }
.settings-panel label { display:flex; flex-direction:column; gap:4px; font-size:12px; letter-spacing:.3px; color:var(--text-dim); }
.settings-panel label:has(.pf-hint) { flex-direction:column; }
.settings-panel label:has(.pf-hint) > span:first-child { display:flex; align-items:baseline; gap:6px; }
.settings-panel { --settings-fieldset-w:300px; width:640px; max-width:80vw; max-height:70vh; min-height:520px; position:relative; }
.settings-panel input[type=number], .settings-panel select { background:var(--input-bg); border:1px solid #333; color:var(--text); padding:4px 6px; font:var(--size-base)/1.4 var(--font-ui); border-radius:4px; width:100% !important; min-width:0; max-width:100%; box-sizing:border-box; }
.settings-panel [data-tab-section] label { max-width:100%; width:100%; }
.settings-panel fieldset.spacing-fieldset, 
.settings-panel fieldset.layout-fieldset,
.settings-panel fieldset.visibility-fieldset, 
.settings-panel fieldset.scroll-fieldset { border:1px solid #333; padding:14px 18px 18px; border-radius:8px; display:flex; flex-direction:column; gap:12px; width:var(--settings-fieldset-w); max-width:100%; background:rgba(255,255,255,0.01); }
.settings-panel fieldset.spacing-fieldset legend { font-size:11px; padding:0 4px; color:var(--text-dim); letter-spacing:.5px; }
.settings-panel.compact { width:440px; }
@media (max-width:520px){ .settings-panel.compact { width:92vw; } }
.overlay-backdrop .settings-panel.compact { align-self:center; }
.settings-panel .tab-hint { display:none; font-size:11px; color:var(--text-dim); letter-spacing:.4px; margin:6px 2px 0; line-height:1.35; width:var(--settings-fieldset-w); text-align:center; }
.settings-panel .tab-hint[data-tab-hint="spacing"] { width: calc(var(--settings-fieldset-w) + 120px); margin-bottom: 5px; }
.settings-panel .tab-hint[data-tab-hint="layout"] { display:block; }
.settings-panel .pf-hint { font-weight:400; }
.settings-panel .tab-section { display:flex; flex-direction:column; align-items:center; justify-content:flex-start; min-height:320px; padding-top:6px; }
.settings-panel .tab-section[hidden] { display:none !important; }
.settings-panel .tab-section fieldset { margin:0 auto; }
.settings-panel .tab-section fieldset label { align-items:flex-start; }
.settings-panel .buttons { position:absolute; left:0; right:0; bottom:20px; padding:0; margin:0 auto; background:transparent; border-top:none; display:flex; justify-content:center; gap:12px; }
.settings-panel .buttons [data-action] { 
  width:130px; 
  white-space:nowrap; 
  overflow:hidden; 
  text-overflow:ellipsis; 
  font-size:12px; 
  padding:6px 10px; 
  text-align:center; 
  display:inline-flex; 
  align-items:center; 
  justify-content:center; 
}
.settings-panel input[type=number]:focus, .settings-panel select:focus { border-color:var(--accent); }
.settings-panel button { background:var(--btn-bg); border:1px solid var(--btn-border); color:var(--text); padding:6px 14px; border-radius:4px; cursor:pointer; font:var(--size-base); transition:background .15s, border-color .15s; }
.settings-panel button:hover, .settings-panel button:focus { background:var(--btn-bg-hover); border-color:#444; }

/* Model Editor (overlay variant) */
.overlay-panel.model-editor { 
  max-width:900px; 
  --me-scrollbar-w: 11px; 
  --me-scrollbar-track-border: 1px; 
  --me-list-right-margin: 6px; 
  --me-right-gutter: calc(14px + var(--me-scrollbar-w) + var(--me-scrollbar-track-border) + var(--me-list-right-margin));
  --me-grid-columns: 80px 1fr 110px 100px 90px 90px;
}
.overlay-panel.model-editor .me-add-controls,
.overlay-panel.model-editor .me-hint,
.overlay-panel.model-editor .me-controls { padding-right: var(--me-right-gutter); }
.overlay-panel.model-editor .me-table { display:flex; flex-direction:column; }
.overlay-panel.model-editor .me-table { margin-bottom: 15px; }
.overlay-panel.model-editor .me-head { display:grid; grid-template-columns: var(--me-grid-columns); align-items:center; gap:8px; padding:6px 14px; padding-right: var(--me-right-gutter); font:11px/1.2 var(--font-ui); color:#9aa; letter-spacing:.3px; margin-bottom:3px; border-bottom:none; }
.overlay-panel.model-editor ul { padding:0; }
.overlay-panel.model-editor .list { position:relative; max-height: calc(10 * 30px + 8px); overflow-y: scroll; overflow-x: hidden; margin-right: var(--me-list-right-margin); }
.overlay-panel.model-editor .list::-webkit-scrollbar { width: var(--me-scrollbar-w); }
.overlay-panel.model-editor .list::-webkit-scrollbar-track { background: #0b0b0b; border-left: var(--me-scrollbar-track-border) solid #202020; }
.overlay-panel.model-editor .list::-webkit-scrollbar-thumb { background: #2a2a2a; border-radius: 6px; }
.overlay-panel.model-editor .list::-webkit-scrollbar-thumb:hover { background: #3a3a3a; }
.overlay-panel.model-editor li { display:grid; grid-template-columns: var(--me-grid-columns); align-items:center; gap:8px; font:var(--size-base)/1.35 var(--font-ui); padding:3px 14px; min-height:27px; }
.overlay-panel.model-editor li.me-add { opacity:.9; }
.overlay-panel.model-editor .me-actions { display:flex; align-items:center; gap:8px; }
.overlay-panel.model-editor .me-add .me-id-input, .overlay-panel.model-editor .me-new .me-id-input { background: transparent; border: 1px solid #333; color: var(--text); padding: 4px 6px; font: var(--size-base)/1.4 var(--font-ui); border-radius: 4px; width: 100%; box-sizing: border-box; }
.overlay-panel.model-editor .me-name-input,
.overlay-panel.model-editor .me-col input.me-num { background: transparent; border: 1px solid #333; color: var(--text); padding: 4px 6px; font: var(--size-base)/1.4 var(--font-ui); border-radius: 4px; width: 100%; box-sizing: border-box; }
.overlay-panel.model-editor input.me-num { appearance: textfield; -moz-appearance: textfield; }
.overlay-panel.model-editor input.me-num::-webkit-outer-spin-button,
.overlay-panel.model-editor input.me-num::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
.overlay-panel.model-editor .me-col-cw input:focus,
.overlay-panel.model-editor .me-col-tpm input:focus,
.overlay-panel.model-editor .me-col-rpm input:focus,
.overlay-panel.model-editor .me-col-tpd input:focus,
.overlay-panel.model-editor input.me-name-input:focus { border-color: #333; box-shadow:none; }
.overlay-panel.model-editor .me-col.me-col-selected { outline: 1px solid #3b82f6; outline-offset: 2px; border-radius: 3px; }
.daily-stats-panel .stats-table tr.active td { background:#162234; }

/* Footer hint and buttons spacing/colors */
.overlay-panel.model-editor .me-hint { color: var(--text-dim); display:block; margin: 15px 14px 10px 0; font: 11px/1.35 var(--font-ui); letter-spacing: .3px; }
.overlay-panel.model-editor .me-controls { display:flex; justify-content:flex-end; padding: 0 14px 0; margin-top: 10px; }

/* Increase overlay internal padding */
.overlay-panel.model-editor { padding: 16px 6px 12px; }

/* Model Selector */
.model-selector-panel { min-width:380px; }
.model-selector-panel .ms-body { padding:10px 14px 14px; display:flex; flex-direction:column; gap:8px; }
.model-selector-panel .filter-row { font:var(--size-base)/1.3 var(--font-ui); color:var(--text-dim); letter-spacing:.3px; min-height:18px; }
.model-selector-panel .filter-row .filter-value { color:var(--text); }
.model-selector-panel .model-list { margin:0; padding:2px 0; overflow:auto; flex:1; }
.model-selector-panel .model-list .model-item { padding:4px 12px; font:var(--size-base)/1.35 var(--font-ui); letter-spacing:.2px; }
.model-selector-panel .model-list .model-item.active { background:#1e3a5a; color:#fff; }
.model-selector-panel .ms-hint { font-size:11px; color:#888; letter-spacing:.4px; text-align:center; margin-top:6px; line-height:1.35; }

/* API Keys */
.api-keys-panel { width:420px; max-width:90vw; }
.api-keys-panel .keys-body label span { font-weight:500; letter-spacing:.3px; }
.api-keys-panel input[type=password] { background:var(--input-bg); border:1px solid #333; color:var(--text); padding:6px 8px; font:var(--size-base)/1.4 var(--font-ui); border-radius:4px; }
.api-keys-panel input[type=password]:focus { border-color:var(--accent); }
.api-keys-panel .keys-body button { background:var(--btn-bg); border:1px solid var(--btn-border); }
.api-keys-panel .keys-body button:hover, .api-keys-panel .keys-body button:focus { background:var(--btn-bg-hover); border-color:#444; }
.api-keys-panel .keys-body { padding:14px 18px 8px; display:flex; flex-direction:column; gap:14px; }
.api-keys-panel .keys-note { margin:0; font-size:12px; line-height:1.5; color:#bbb; }
.api-keys-panel .key-field { display:flex; flex-direction:column; gap:4px; font-size:12px; color:#999; }
.api-keys-panel .keys-buttons { display:flex; gap:8px; justify-content:flex-end; margin-top:8px; }
.api-keys-panel .keys-footnote { font-size:12px; opacity:.55; line-height:1.5; }
.api-keys-panel .keys-note a.ext-link { color: var(--accent); text-decoration:none; }
.api-keys-panel .keys-note a.ext-link:hover, .api-keys-panel .keys-note a.ext-link:focus { text-decoration:underline; }