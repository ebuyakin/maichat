<!DOCTYPE html>
<html lang="en" data-page="tutorial">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MaiChat Tutorial - Getting Started Guide</title>
  <meta name="description" content="Learn to use MaiChat: a keyboard-first interface for ChatGPT, Claude, and Gemini with topic organization and powerful filtering." />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <style>
/* MaiChat Tutorial Styles */

html[data-page="tutorial"] {
  --bg-main: #0a0a0a;
  --bg-alt: #1a1a1a;
  --bg-card: #111;
  --text: #e0e0e0;
  --text-dim: #999;
  --accent: #4a9eff;
  --accent-hover: #6bb0ff;
  --border: #333;
  --success: #4ade80;
  --font-ui: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Droid Sans Mono', 'Source Code Pro', monospace;
  --sidebar-width: 360px;
}

html[data-page="tutorial"] * { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box; 
}

html[data-page="tutorial"] html, body { 
  margin: 0; 
  padding: 0; 
  background: var(--bg-main); 
  color: var(--text); 
  scroll-behavior: smooth;
  height: 100%;
}

html[data-page="tutorial"] body { 
  font-family: var(--font-ui);
  font-size: 16px;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  display: flex;
}

/* Sidebar Navigation */
html[data-page="tutorial"] .sidebar {
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  width: var(--sidebar-width);
  background: var(--bg-alt);
  border-right: 1px solid var(--border);
  overflow-y: auto;
  padding: 24px 0;
  z-index: 100;
}

html[data-page="tutorial"] .sidebar-header {
  padding: 0 24px 20px 24px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 20px;
}

html[data-page="tutorial"] .sidebar-title {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 4px;
}

html[data-page="tutorial"] .sidebar-subtitle {
  font-size: 0.85rem;
  color: var(--text-dim);
}

html[data-page="tutorial"] .sidebar-nav {
  list-style: none;
  padding-right: 15px;
  margin-left: 12px;
}

/* Top link styling */
html[data-page="tutorial"] .nav-top a {
  font-weight: 600;
  color: var(--text);
}

/* Nav items */
html[data-page="tutorial"] .nav-item {
  position: relative;
}

/* Items without children - simple link */
html[data-page="tutorial"] .nav-item:not(.has-children) > a {
  display: block;
  padding: 2px 12px;
  color: var(--text-dim);
  text-decoration: none;
  font-size: 0.95rem;
  transition: all 0.2s;
  border-left: 3px solid transparent;
}

html[data-page="tutorial"] .nav-item:not(.has-children) > a:hover {
  color: var(--text);
  background: rgba(255, 255, 255, 0.05);
}

html[data-page="tutorial"] .nav-item:not(.has-children) > a.active {
  color: var(--accent);
  background: rgba(74, 158, 255, 0.1);
  border-left-color: var(--accent);
}

/* Items with children - header with toggle */
html[data-page="tutorial"] .nav-item.has-children > .nav-item-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 2px 12px 2px 8px;
  transition: background 0.2s;
}

html[data-page="tutorial"] .nav-item.has-children > .nav-item-header:hover {
  background: rgba(255, 255, 255, 0.05);
}

html[data-page="tutorial"] .nav-item-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  font-size: 1rem;
  color: var(--text-dim);
  cursor: pointer;
  user-select: none;
  transition: transform 0.2s, color 0.2s;
  flex-shrink: 0;
}

html[data-page="tutorial"] .nav-item-toggle:hover {
  color: var(--text);
}

/* Chevron rotation */
html[data-page="tutorial"] .nav-item.has-children > .nav-item-header .nav-item-toggle {
  transform: rotate(90deg); /* Down when expanded */
}

html[data-page="tutorial"] .nav-item.has-children.collapsed > .nav-item-header .nav-item-toggle {
  transform: rotate(0deg); /* Right when collapsed */
}

/* Links inside headers */
html[data-page="tutorial"] .nav-item-header a {
  flex: 1;
  color: var(--text-dim);
  text-decoration: none;
  font-size: 0.95rem;
  transition: color 0.2s;
  border-left: none;
}

html[data-page="tutorial"] .nav-item-header a:hover {
  color: var(--text);
}

html[data-page="tutorial"] .nav-item-header a.active {
  color: var(--accent);
  font-weight: 600;
}

/* Sub-items container */
html[data-page="tutorial"] .nav-sub-items {
  list-style: none;
  max-height: 2000px;
  overflow: hidden;
  transition: max-height 0.3s ease-out, opacity 0.3s;
  opacity: 1;
  padding-left: 12px;
}

html[data-page="tutorial"] .nav-item.collapsed > .nav-sub-items {
  max-height: 0;
  opacity: 0;
}

/* Nested sub-items styling */
html[data-page="tutorial"] .nav-sub-items .nav-item:not(.has-children) > a {
  padding: 2px 12px;
  font-size: 0.9rem;
}

html[data-page="tutorial"] .nav-sub-items .nav-sub-items .nav-item > a {
  padding: 2px 12px;
  font-size: 0.85rem;
  color: var(--text-dim);
}

/* Main Content */
html[data-page="tutorial"] .main-content {
  margin-left: var(--sidebar-width);
  flex: 1;
  min-width: 0;
}

html[data-page="tutorial"] .container { 
  max-width: 900px; 
  margin: 0 auto; 
  padding: 48px 48px 64px;
}

html[data-page="tutorial"] header { 
  margin-bottom: 48px;
}

html[data-page="tutorial"] h1 { 
  font-size: 2.5rem; 
  line-height: 1.2; 
  margin: 0 0 16px; 
  font-weight: 700; 
}

html[data-page="tutorial"] .subtitle { 
  color: var(--text-dim); 
  margin: 0 0 24px; 
  font-size: 1.1rem; 
}

html[data-page="tutorial"] .back-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: var(--text-dim);
  text-decoration: none;
  font-size: 0.9rem;
  margin-bottom: 24px;
  transition: color 0.2s;
}

html[data-page="tutorial"] .back-link:hover {
  color: var(--accent);
}

html[data-page="tutorial"] h2 { 
  margin-top: 60px; 
  padding-top: 40px; 
  border-top: 2px solid var(--border); 
  font-size: 1.75rem; 
  font-weight: 700;
  scroll-margin-top: 24px;
}

html[data-page="tutorial"] section:first-of-type h2 { 
  margin-top: 0;
  border-top: none;
  padding-top: 0;
}

html[data-page="tutorial"] h3 { 
  margin-top: 36px; 
  font-size: 1.25rem; 
  color: var(--accent); 
  font-weight: 600;
  scroll-margin-top: 24px;
}

html[data-page="tutorial"] h4 { 
  margin-top: 24px; 
  font-size: 1.05rem; 
  font-weight: 600; 
}

html[data-page="tutorial"] p { 
  margin: 14px 0; 
  line-height: 1.7; 
}

html[data-page="tutorial"] ul, ol { 
  margin: 12px 0 20px 24px; 
}

html[data-page="tutorial"] li { 
  margin: 10px 0; 
  line-height: 1.7; 
}

html[data-page="tutorial"] code { 
  background: var(--bg-card); 
  padding: 3px 8px; 
  border-radius: 4px; 
  font-family: var(--font-mono); 
  font-size: 0.9em; 
  color: var(--accent); 
}

html[data-page="tutorial"] kbd { 
  background: var(--bg-alt); 
  border: 1px solid var(--border); 
  padding: 3px 8px; 
  border-radius: 4px; 
  font-family: var(--font-mono); 
  font-size: 0.85em; 
  box-shadow: 0 2px 4px rgba(0,0,0,0.3); 
  white-space: nowrap; 
}

html[data-page="tutorial"] blockquote {
  border-left: 3px solid var(--accent); 
  padding: 16px 20px; 
  background: rgba(74, 158, 255, 0.1); 
  border-radius: 0 8px 8px 0; 
  margin: 20px 0; 
}

html[data-page="tutorial"] blockquote strong { 
  color: var(--accent); 
}

html[data-page="tutorial"] .info { 
  border-left: 3px solid var(--success); 
  padding: 16px 20px; 
  background: rgba(74, 222, 128, 0.1); 
  border-radius: 0 8px 8px 0; 
  margin: 20px 0; 
}

html[data-page="tutorial"] .info strong { 
  color: var(--success); 
}

html[data-page="tutorial"] .footer { 
  margin-top: 64px; 
  padding-top: 24px; 
  border-top: 1px solid var(--border); 
  color: var(--text-dim); 
  font-size: 0.95em; 
  text-align: center; 
}

html[data-page="tutorial"] .footer .small {
  font-size: 0.9em;
  margin-top: 8px;
  display: block;
}

html[data-page="tutorial"] a { 
  color: var(--accent); 
  text-decoration: none; 
  transition: color 0.2s; 
}

html[data-page="tutorial"] a:hover { 
  color: var(--accent-hover); 
}

html[data-page="tutorial"] table { 
  border-collapse: collapse; 
  width: 100%; 
  margin: 20px 0; 
}

html[data-page="tutorial"] th, td { 
  text-align: left; 
  padding: 12px; 
  border: 1px solid var(--border); 
}

html[data-page="tutorial"] th { 
  background: var(--bg-card); 
  font-weight: 600; 
}

/* Mobile Responsive */
@media (max-width: 1024px) {
  .sidebar {
    transform: translateX(-100%);
    transition: transform 0.3s;
  }
  
  .sidebar.open {
    transform: translateX(0);
  }
  
  .main-content {
    margin-left: 0;
  }
  
  .mobile-menu-btn {
    position: fixed;
    top: 16px;
    left: 16px;
    z-index: 101;
    background: var(--bg-alt);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .container {
    padding: 80px 24px 48px;
  }
}

@media (min-width: 1025px) {
  .mobile-menu-btn {
    display: none;
  }
}

@media (max-width: 768px) {
  h1 { 
    font-size: 2rem; 
  }
  
  h2 { 
    font-size: 1.5rem; 
  }
  
  .container { 
    padding: 80px 16px 48px; 
  }
}

  </style>
</head>
<body>
  <button class="mobile-menu-btn">
    <span>☰</span> Menu
  </button>
  
  <!-- Sidebar Navigation -->
  <nav class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-title">MaiChat Tutorial</div>
      <div class="sidebar-subtitle">Table of Contents</div>
    </div>
    
<ul class="sidebar-nav">
  <li class="nav-item nav-top">
    <a href="#top">↑ Top</a>
  </li>
  <li class="nav-item">
    <a href="#overview">What is MaiChat</a>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#quickstart">Quickstart (5 minutes)</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#step-1-set-up-your-api-key">Step 1: Set up your API key</a>
      </li>
      <li class="nav-item">
        <a href="#step-2-choose-a-model">Step 2: Choose a model</a>
      </li>
      <li class="nav-item">
        <a href="#step-3-send-your-first-message">Step 3: Send your first message</a>
      </li>
      <li class="nav-item">
        <a href="#step-4-navigate-the-response">Step 4: Navigate the response</a>
      </li>
      <li class="nav-item">
        <a href="#step-5-organize-with-topics">Step 5: Organize with topics</a>
      </li>
      <li class="nav-item">
        <a href="#step-6-filter-your-history">Step 6: Filter your history</a>
      </li>
      <li class="nav-item">
        <a href="#whats-next">What's next?</a>
      </li>
    </ul>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#modes">Navigation: Understanding Modes</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#understanding-modes">Understanding Modes</a>
      </li>
      <li class="nav-item">
        <a href="#the-three-modes">The Three Modes</a>
      </li>
      <li class="nav-item">
        <a href="#switching-between-modes">Switching Between Modes</a>
      </li>
      <li class="nav-item">
        <a href="#view-mode-navigation">View Mode Navigation</a>
      </li>
      <li class="nav-item">
        <a href="#view-mode-actions">View Mode Actions</a>
      </li>
      <li class="nav-item">
        <a href="#input-mode-shortcuts">Input Mode Shortcuts</a>
      </li>
      <li class="nav-item">
        <a href="#command-mode-usage">Command Mode Usage</a>
      </li>
      <li class="nav-item">
        <a href="#mousetouchpad-behavior">Mouse/Touchpad Behavior</a>
      </li>
      <li class="nav-item">
        <a href="#startup-behavior">Startup Behavior</a>
      </li>
      <li class="nav-item">
        <a href="#common-patterns">Common Patterns</a>
      </li>
    </ul>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#topics">Topics and the Topic Tree</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#why-use-topics">Why Use Topics?</a>
      </li>
      <li class="nav-item">
        <a href="#the-default-topic-tree">The Default Topic Tree</a>
      </li>
      <li class="nav-item">
        <a href="#creating-and-managing-topics">Creating and Managing Topics</a>
      </li>
      <li class="nav-item">
        <a href="#reassigning-messages-to-topics">Reassigning Messages to Topics</a>
      </li>
      <li class="nav-item">
        <a href="#topic-hierarchy-best-practices">Topic Hierarchy Best Practices</a>
      </li>
      <li class="nav-item">
        <a href="#topic-naming-tips">Topic Naming Tips</a>
      </li>
      <li class="nav-item">
        <a href="#filtering-by-topics">Filtering by Topics</a>
      </li>
      <li class="nav-item">
        <a href="#archive-pattern">Archive Pattern</a>
      </li>
      <li class="nav-item">
        <a href="#when-to-split-topics">When to Split Topics</a>
      </li>
      <li class="nav-item">
        <a href="#topic-metadata-advanced">Topic Metadata (Advanced)</a>
      </li>
      <li class="nav-item">
        <a href="#common-questions">Common Questions</a>
      </li>
    </ul>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#filtering">Search and Filtering Language</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#why-filter">Why Filter?</a>
      </li>
      <li class="nav-item">
        <a href="#basic-filters">Basic Filters</a>
      </li>
      <li class="nav-item">
        <a href="#combining-filters">Combining Filters</a>
      </li>
      <li class="nav-item">
        <a href="#topic-patterns-case-insensitive">Topic Patterns (Case-Insensitive)</a>
      </li>
      <li class="nav-item">
        <a href="#model-patterns-case-insensitive">Model Patterns (Case-Insensitive)</a>
      </li>
      <li class="nav-item">
        <a href="#date-filters">Date Filters</a>
      </li>
      <li class="nav-item">
        <a href="#filter-examples">Practical Examples</a>
      </li>
      <li class="nav-item">
        <a href="#workflow-tips">Workflow Tips</a>
      </li>
      <li class="nav-item">
        <a href="#command-mode-shortcuts">Command Mode Shortcuts</a>
      </li>
      <li class="nav-item">
        <a href="#common-mistakes">Common Mistakes</a>
      </li>
    </ul>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#context">Context Management</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#why-context-matters">Why Context Matters</a>
      </li>
      <li class="nav-item">
        <a href="#what-gets-sent">What Gets Sent?</a>
      </li>
      <li class="nav-item">
        <a href="#the-context-boundary">The Context Boundary</a>
      </li>
      <li class="nav-item">
        <a href="#the-message-counter-top-right">The Message Counter (Top-Right)</a>
      </li>
      <li class="nav-item">
        <a href="#how-context-is-computed">How Context is Computed</a>
      </li>
      <li class="nav-item">
        <a href="#context-control-strategies">Context Control Strategies</a>
      </li>
      <li class="nav-item">
        <a href="#understanding-token-trimming">Understanding Token Trimming</a>
      </li>
      <li class="nav-item">
        <a href="#practical-examples">Practical Examples</a>
      </li>
      <li class="nav-item">
        <a href="#common-patterns">Common Patterns</a>
      </li>
      <li class="nav-item">
        <a href="#advanced-context-and-system-messages">Advanced: Context and System Messages</a>
      </li>
      <li class="nav-item">
        <a href="#troubleshooting">Troubleshooting</a>
      </li>
      <li class="nav-item">
        <a href="#key-takeaways">Key Takeaways</a>
      </li>
    </ul>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#models">API Keys and Model Catalogue</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#setting-up-api-keys">Setting Up API Keys</a>
      </li>
      <li class="nav-item">
        <a href="#understanding-the-model-catalogue">Understanding the Model Catalogue</a>
      </li>
      <li class="nav-item">
        <a href="#managing-models">Managing Models</a>
      </li>
      <li class="nav-item">
        <a href="#adding-more-models">Adding More Models</a>
      </li>
      <li class="nav-item">
        <a href="#how-context-window-affects-your-work">How Context Window Affects Your Work</a>
      </li>
      <li class="nav-item">
        <a href="#understanding-rate-limits-tpm-vs-context-window">Understanding Rate Limits (TPM vs Context Window)</a>
      </li>
      <li class="nav-item">
        <a href="#model-selection-strategy">Model Selection Strategy</a>
      </li>
      <li class="nav-item">
        <a href="#best-practices">Best Practices</a>
      </li>
    </ul>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#settings">Settings and Tools</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#settings">Settings</a>
      </li>
      <li class="nav-item">
        <a href="#daily-statistics">Daily Statistics</a>
      </li>
      <li class="nav-item">
        <a href="#export-data">Export Data</a>
      </li>
    </ul>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#errors">Common Errors and Solutions</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#error-classifications">Error Classifications</a>
      </li>
      <li class="nav-item">
        <a href="#common-workflows">Common Workflows</a>
      </li>
      <li class="nav-item">
        <a href="#interface-issues">Interface Issues</a>
      </li>
      <li class="nav-item">
        <a href="#when-all-else-fails">When All Else Fails</a>
      </li>
    </ul>
  </li>
</ul>
  </nav>
  
  <!-- Main Content -->
  <div class="main-content">
    <main class="container" id="top">
      <header>
        <a href="index.html" class="back-link">← Back to Home</a>
        <h1>MaiChat Tutorial</h1>
        <p class="subtitle">Master MaiChat: keyboard-first interface for ChatGPT, Claude, and Gemini</p>
      </header>

      <section id="overview">
<h2 id="overview">What is MaiChat</h2>
        <p>MaiChat is a keyboard-centric interface for ChatGPT, Claude, and Gemini that puts you in control. Unlike standard chat interfaces, MaiChat organizes your conversations into a hierarchical topic tree, lets you filter message history with a powerful CLI-like language, and gives you precise control over what context gets sent to each model. It&#39;s designed for power users who want to work faster, stay organized, and maintain complete control over their AI interactions.</p>
      </section>

      <section id="quickstart">
<h2 id="quickstart">Quickstart (5 minutes)</h2>
        <p>Get MaiChat running and send your first message. This guide covers everything you need to start using the app effectively.</p>
        <blockquote>
        <p><strong>Important:</strong> MaiChat is designed for keyboard-first navigation with Vim-style commands (<kbd>j</kbd>/<kbd>k</kbd> for scrolling, <kbd>u</kbd>/<kbd>d</kbd> for jumping between messages, etc.). While you can use your mouse, learning the keyboard shortcuts will make you much more efficient. Press <kbd>F1</kbd> anytime to see the full reference.</p>
        </blockquote>
        <h3 id="step-1-set-up-your-api-key">Step 1: Set up your API key</h3>
        <p>MaiChat needs API keys to connect to LLM providers (OpenAI, Anthropic, Google).</p>
        <ol>
        <li>Press <kbd>Ctrl+K</kbd> to open API Keys settings</li>
        <li>Enter your API key for at least one provider:<ul>
        <li><strong>OpenAI</strong>: Get your key at <a href="https://platform.openai.com/api-keys">platform.openai.com/api-keys</a></li>
        <li><strong>Anthropic</strong>: Get your key at <a href="https://console.anthropic.com">console.anthropic.com</a></li>
        <li><strong>Google</strong>: Get your key at <a href="https://aistudio.google.com/apikey">aistudio.google.com/apikey</a></li>
        </ul>
        </li>
        <li>Click Save</li>
        </ol>
        <blockquote>
        <p><strong>Note:</strong> API keys are stored locally in your browser and never leave your device.</p>
        </blockquote>
        <h3 id="step-2-choose-a-model">Step 2: Choose a model</h3>
        <p>Before sending your first message, select which AI model to use:</p>
        <ol>
        <li>Press <kbd>Ctrl+M</kbd> to open the model selector</li>
        <li>Browse the available models based on your API keys:<ul>
        <li><strong>OpenAI</strong>: GPT-5, GPT-5 mini, GPT-5 nano, o4-mini</li>
        <li><strong>Anthropic</strong>: Claude Sonnet 4.5, Claude Opus 4.1, Claude 3.5 Haiku</li>
        <li><strong>Google</strong>: Gemini 2.5 Pro, Gemini 2.5 Flash, Gemini 2.5 Flash-Lite</li>
        </ul>
        </li>
        <li>Select a model and press <kbd>Enter</kbd></li>
        </ol>
        <p>The selected model will be used for all messages until you change it.</p>
        <blockquote>
        <p><strong>Tip:</strong> Not sure which to choose? Start with GPT-5 nano (OpenAI), Claude Sonnet 4.5 (Anthropic), or Gemini 2.5 Flash-Lite (Google) — they&#39;re fast and cost-effective.</p>
        </blockquote>
        <h3 id="step-3-send-your-first-message">Step 3: Send your first message</h3>
        <p>You start in <strong>Input Mode</strong> with the cursor already in the message box.</p>
        <ol>
        <li>Type your message (e.g., &quot;Explain what MaiChat is in one sentence&quot;)</li>
        <li>Press <kbd>Enter</kbd> to send</li>
        <li>Watch the response appear in the history area above</li>
        </ol>
        <h3 id="step-4-navigate-the-response">Step 4: Navigate the response</h3>
        <p>After the response arrives, switch to <strong>View Mode</strong> to read and navigate:</p>
        <ol>
        <li>Press <kbd>Esc</kbd> to enter View Mode</li>
        <li>Use <kbd>j</kbd> and <kbd>k</kbd> to scroll the conversation history up and down (like Vim)</li>
        <li>Use <kbd>u</kbd> and <kbd>d</kbd> to scroll to the beginning of the previous/next message</li>
        <li>Press <kbd>g</kbd> to jump to the first message, <kbd>G</kbd> for the last</li>
        </ol>
        <h3 id="step-5-organize-with-topics">Step 5: Organize with topics</h3>
        <p>MaiChat comes with a starter topic tree (General, Work, Personal, Research) that you can use immediately:</p>
        <ol>
        <li>Press <kbd>Ctrl+T</kbd> in Input Mode to see the topic selector</li>
        <li>Use search box to filter the topic list or press <kbd>Ctrl+J</kbd> to navigate the tree using <code>h``j``k``l</code> keys (vim-style).</li>
        <li>Select a topic from the list and press <kbd>Enter</kbd>, the selected topic will be displayed at the bottom of the input zone.</li>
        <li>Type a message and send it</li>
        </ol>
        <p>All future messages will use this topic until you change it. You can reassign messages to different topics anytime.</p>
        <blockquote>
        <p><strong>Learn more:</strong> See the <a href="#topics">Topics</a> section to learn how to customize your topic tree structure and use to manage the context of your requests.</p>
        </blockquote>
        <h3 id="step-6-filter-your-history">Step 6: Filter your history</h3>
        <p>As your history grows, use filters to find messages:</p>
        <ol>
        <li><p>Press <kbd>Ctrl+D</kbd> or (<kbd>Esc</kbd> from the View mode) to enter Command Mode (top bar)</p>
        </li>
        <li><p>In the filter input box you can type various filters and commands controlling your conversation</p>
        </li>
        <li><p>Try these filters:</p>
        <ul>
        <li><code>r10</code> — show last 10 message pairs (request and response)</li>
        <li><kbd>t</kbd> - show only current topic messages</li>
        <li><code>t'Learning...'</code> — show all messages in &quot;Learning MaiChat&quot; topic and subtopics</li>
        <li><code>d<7</code> - show all messages of the last 7 days</li>
        <li><code>c'happy'</code> - show all messages with word &#39;happy&#39; in them.</li>
        </ul>
        </li>
        <li><p>Press <kbd>Enter</kbd> to apply the filter. The conversation history will be filtered and display only messages matching the filter.</p>
        </li>
        </ol>
        <p>Press <kbd>Esc</kbd> in Command Mode to clear filters and see all history.</p>
        <h3 id="whats-next">What's next?</h3>
        <p>You now know the basics! Here&#39;s what to explore next:</p>
        <ul>
        <li><strong><a href="#modes">Navigation</a></strong> — understand the three modes and how to switch between them</li>
        <li><strong><a href="#topics">Topics</a></strong> — learn to structure your conversations with topic trees</li>
        <li><strong><a href="#filtering">Search &amp; Filtering</a></strong> — master the powerful CLI filter language</li>
        <li><strong><a href="#context">Context Management</a></strong> — control what the model sees in each request</li>
        </ul>
        <blockquote>
        <p><strong>Quick reference:</strong> Press <kbd>F1</kbd> anytime to see all keyboard shortcuts.</p>
        </blockquote>
      </section>

      <section id="modes">
<h2 id="modes">Navigation: Understanding Modes</h2>
        <p>MaiChat uses a <strong>vim-inspired modal system</strong> where the same keys perform different functions depending on the current mode. This design maximizes keyboard efficiency:</p>
        <ul>
        <li><strong>In Input Mode and Command Mode:</strong> Most keys are used for typing text (like a regular editor). Commands and actions typically use <kbd>Ctrl+Key</kbd> combinations.</li>
        <li><strong>In View Mode:</strong> There&#39;s no text entry, so single key presses perform various navigation and management actions.</li>
        </ul>
        <p>This modal approach lets you stay on the home row and accomplish tasks without constantly reaching for the mouse or modifier keys.</p>
        <h3 id="understanding-modes">Understanding Modes</h3>
        <p>MaiChat organizes your interaction into <strong>three distinct modes</strong>, each with its own screen area and keyboard commands.</p>
        <blockquote>
        <p><strong>Visual indicator:</strong> The current mode is always shown in a badge at the bottom-left corner of the screen (Vim-style), displaying &quot;INPUT&quot;, &quot;VIEW&quot;, or &quot;COMMAND&quot;.</p>
        </blockquote>
        <h3 id="the-three-modes">The Three Modes</h3>
        <p><strong>Input Mode</strong> (bottom area)</p>
        <ul>
        <li><strong>Purpose:</strong> Compose and send messages to AI models</li>
        <li><strong>Screen:</strong> Message input box with model and topic selectors</li>
        <li><strong>Main actions:</strong> Type, send messages, select model/topic</li>
        <li><strong>Visual cue:</strong> Cursor in the input box, input area highlighted</li>
        </ul>
        <p><strong>View Mode</strong> (middle area)</p>
        <ul>
        <li><strong>Purpose:</strong> Read, navigate, and manage your message history</li>
        <li><strong>Screen:</strong> Conversation history display</li>
        <li><strong>Main actions:</strong> Scroll, jump between messages, rate messages, change topics, copy message content</li>
        <li><strong>Visual cue:</strong> Active message highlighted in history</li>
        </ul>
        <p><strong>Command Mode</strong> (top area)</p>
        <ul>
        <li><strong>Purpose:</strong> Filter and search your message history</li>
        <li><strong>Screen:</strong> Command input bar at the top</li>
        <li><strong>Main actions:</strong> Type filter commands, navigate command history</li>
        <li><strong>Visual cue:</strong> Cursor in the command bar, command area highlighted</li>
        </ul>
        <h3 id="switching-between-modes">Switching Between Modes</h3>
        <p><strong>Contextual switching with Enter/Esc:</strong></p>
        <ul>
        <li><kbd>Enter</kbd> — Generally moves you &quot;into&quot; action (View → Input, Command → View)</li>
        <li><kbd>Esc</kbd> — Generally moves you &quot;out&quot; or &quot;up&quot; (Input → View, View stays in View, Command → clears)</li>
        </ul>
        <p><strong>Direct mode jumps:</strong></p>
        <ul>
        <li><kbd>Ctrl+I</kbd> — Jump directly to Input Mode</li>
        <li><kbd>Ctrl+V</kbd> — Jump directly to View Mode  </li>
        <li><kbd>Ctrl+D</kbd> — Jump directly to Command Mode</li>
        </ul>
        <blockquote>
        <p><strong>Tip:</strong> <kbd>Enter</kbd> and <kbd>Esc</kbd> are your primary navigation keys. Learn these first, use the Ctrl shortcuts when you need to jump quickly.</p>
        </blockquote>
        <h3 id="view-mode-navigation">View Mode Navigation</h3>
        <p>This is where you&#39;ll spend most of your reading time. View Mode uses Vim-inspired keys:</p>
        <p><strong>Basic scrolling:</strong></p>
        <ul>
        <li><kbd>j</kbd> — Scroll down (toward newer messages)</li>
        <li><kbd>k</kbd> — Scroll up (toward older messages)</li>
        </ul>
        <p><strong>Jump to message boundaries:</strong></p>
        <ul>
        <li><kbd>u</kbd> — Jump to the start of the previous message</li>
        <li><kbd>d</kbd> — Jump to the start of the next message</li>
        </ul>
        <p><strong>Jump to extremes:</strong></p>
        <ul>
        <li><kbd>g</kbd> — Jump to the very first message in history</li>
        <li><kbd>G</kbd> — Jump to the last (newest) message</li>
        </ul>
        <p><strong>Context navigation:</strong></p>
        <ul>
        <li><kbd>o</kbd> — Jump to the context boundary (first message that will be sent to the model)</li>
        <li><kbd>Shift+O</kbd> — Also jumps to context boundary (same as <kbd>o</kbd>)</li>
        </ul>
        <blockquote>
        <p><strong>Why u/d instead of arrows?</strong> Keeping your hands on the home row is faster. You&#39;ll appreciate it after a few sessions!</p>
        </blockquote>
        <h3 id="view-mode-actions">View Mode Actions</h3>
        <p>Beyond navigation, View Mode lets you manage your messages:</p>
        <p><strong>Rating messages:</strong></p>
        <ul>
        <li><kbd>1</kbd> / <kbd>2</kbd> / <kbd>3</kbd> — Set star rating (1-3 stars)</li>
        <li><kbd>Space</kbd> — Clear star rating</li>
        <li><kbd>a</kbd> — Toggle color flag (blue square or grey circle)</li>
        </ul>
        <p><strong>Managing messages:</strong></p>
        <ul>
        <li><kbd>Ctrl+T</kbd> — Change the topic of the active message</li>
        <li><kbd>e</kbd> — Edit and resend (only works on error messages)</li>
        <li><kbd>d</kbd> — Delete message (only works on error messages)</li>
        </ul>
        <h3 id="input-mode-shortcuts">Input Mode Shortcuts</h3>
        <p>When composing messages, these editing shortcuts speed up your workflow:</p>
        <p><strong>Basic actions:</strong></p>
        <ul>
        <li><kbd>Enter</kbd> — Send the message</li>
        <li><kbd>Esc</kbd> — Return to View Mode (without sending)</li>
        <li><kbd>Ctrl+M</kbd> — Open model selector</li>
        <li><kbd>Ctrl+T</kbd> — Open topic selector</li>
        </ul>
        <p><strong>Emacs-style text editing:</strong></p>
        <ul>
        <li><kbd>Ctrl+A</kbd> — Move cursor to start of line</li>
        <li><kbd>Ctrl+E</kbd> — Move cursor to end of line</li>
        <li><kbd>Ctrl+U</kbd> — Delete from cursor to start of line</li>
        <li><kbd>Ctrl+W</kbd> — Delete word to the left</li>
        <li><kbd>Ctrl+Shift+F</kbd> — Move cursor forward one word</li>
        <li><kbd>Ctrl+Shift+B</kbd> — Move cursor backward one word</li>
        </ul>
        <blockquote>
        <p><strong>Note:</strong> These same Emacs-style shortcuts work in Command Mode too!</p>
        </blockquote>
        <h3 id="command-mode-usage">Command Mode Usage</h3>
        <p>Command Mode is for searching and filtering. See the <a href="#filtering">Search &amp; Filtering</a> section for detailed filter syntax.</p>
        <p><strong>Filter actions:</strong></p>
        <ul>
        <li><kbd>Enter</kbd> — Apply filter and switch to View Mode</li>
        <li><kbd>Esc</kbd> — Clear the command input (stays in Command Mode)</li>
        <li><kbd>Ctrl+P</kbd> — Previous command (command history)</li>
        <li><kbd>Ctrl+N</kbd> — Next command (command history)</li>
        </ul>
        <p><strong>Emacs-style text editing:</strong></p>
        <ul>
        <li><kbd>Ctrl+A</kbd> — Move cursor to start of line</li>
        <li><kbd>Ctrl+E</kbd> — Move cursor to end of line</li>
        <li><kbd>Ctrl+U</kbd> — Delete from cursor to start of line</li>
        <li><kbd>Ctrl+W</kbd> — Delete word to the left</li>
        <li><kbd>Ctrl+Shift+F</kbd> — Move cursor forward one word</li>
        <li><kbd>Ctrl+Shift+B</kbd> — Move cursor backward one word</li>
        </ul>
        <h3 id="mousetouchpad-behavior">Mouse/Touchpad Behavior</h3>
        <p>You can use your mouse, but it respects the mode system:</p>
        <ul>
        <li><strong>Clicking the input box</strong> → switches to Input Mode</li>
        <li><strong>Clicking a message in history</strong> → switches to View Mode and makes that message active</li>
        <li><strong>Clicking the command bar</strong> → switches to Command Mode</li>
        </ul>
        <p>The app automatically switches modes to avoid conflicts with keyboard shortcuts.</p>
        <h3 id="startup-behavior">Startup Behavior</h3>
        <p>When you open or reload MaiChat:</p>
        <ol>
        <li>App starts in <strong>Input Mode</strong></li>
        <li>The newest (last) message is scrolled into view</li>
        <li>Cursor is ready in the input box</li>
        </ol>
        <p>This lets you immediately continue your conversation.</p>
        <h3 id="common-patterns">Common Patterns</h3>
        <p><strong>Quick send workflow:</strong></p>
        <ol>
        <li>Type message (already in Input Mode)</li>
        <li><kbd>Enter</kbd> to send</li>
        <li><kbd>Esc</kbd> to read response in View Mode</li>
        <li><kbd>Enter</kbd> when ready to reply</li>
        </ol>
        <p><strong>Search and respond:</strong></p>
        <ol>
        <li><kbd>Ctrl+D</kbd> to enter Command Mode</li>
        <li>Type filter (e.g., <code>t'Work' & d<7d</code>)</li>
        <li><kbd>Enter</kbd> to see filtered messages</li>
        <li><kbd>Ctrl+I</kbd> to jump to Input and compose new message</li>
        </ol>
        <p><strong>Review and rate:</strong></p>
        <ol>
        <li><kbd>g</kbd> to jump to first message</li>
        <li>Read and use <kbd>1</kbd>/<kbd>2</kbd>/<kbd>3</kbd> to rate</li>
        <li><kbd>d</kbd> to jump to next message</li>
        <li>Repeat</li>
        </ol>
        <blockquote>
        <p><strong>Learn more:</strong> Press <kbd>F1</kbd> anytime to see the complete keyboard reference with all shortcuts.</p>
        </blockquote>
      </section>

      <section id="topics">
<h2 id="topics">Topics and the Topic Tree</h2>
        <p>Topics are MaiChat&#39;s core organizational feature. Every message belongs to exactly one topic in a hierarchical tree structure, letting you organize thousands of messages without chaos.</p>
        <h3 id="why-use-topics">Why Use Topics?</h3>
        <p>Unlike standard chat interfaces where conversations become one endless scroll, topics give you:</p>
        <ul>
        <li><strong>Logical grouping:</strong> Keep related conversations together (e.g., all Python questions under &quot;Coding &gt; Python&quot;)</li>
        <li><strong>Easy filtering:</strong> Show only messages from one topic or branch with a simple <kbd>t</kbd> command</li>
        <li><strong>Context control:</strong> Filter by topic before sending to include only relevant history</li>
        <li><strong>Quick navigation:</strong> Jump between different conversation threads without scrolling</li>
        <li><strong>Retrospective organization:</strong> Reassign messages to different topics as your needs evolve</li>
        </ul>
        <h3 id="the-default-topic-tree">The Default Topic Tree</h3>
        <p>MaiChat starts with a simple topic tree to get you going:</p>
        <pre><code>
        General
        Work
        Personal
        Research
        </code></pre>
        <p>These are intentionally broad. Start using them immediately, then create subtopics as patterns emerge.</p>
        <h3 id="creating-and-managing-topics">Creating and Managing Topics</h3>
        <p><strong>Quick topic picker (during composition):</strong></p>
        <ol>
        <li>Press <kbd>Ctrl+T</kbd> in Input Mode</li>
        <li>Search for existing topics or press <kbd>n</kbd> to create a new one</li>
        <li>Select a topic — all future messages use it until you change it</li>
        </ol>
        <p><strong>Topic Editor (full management):</strong></p>
        <ol>
        <li>Press <kbd>Ctrl+Shift+T</kbd> from any mode to open the Topic Editor</li>
        <li>Use keyboard navigation:<ul>
        <li><kbd>j</kbd>/<kbd>k</kbd> — Move down/up the tree</li>
        <li><kbd>h</kbd>/<kbd>l</kbd> — Collapse/expand branches</li>
        <li><kbd>n</kbd> — Create new child topic</li>
        <li><kbd>N</kbd> — Create new root-level topic</li>
        <li><kbd>r</kbd> — Rename focused topic</li>
        <li><kbd>d</kbd> — Delete topic (requires confirmation)</li>
        </ul>
        </li>
        <li>Press <kbd>Ctrl+S</kbd> to save changes</li>
        </ol>
        <blockquote>
        <p><strong>Tip:</strong> The Topic Editor shows keyboard hints at the top. It&#39;s a powerful interface once you learn the keys!</p>
        </blockquote>
        <h3 id="reassigning-messages-to-topics">Reassigning Messages to Topics</h3>
        <p>Made a mistake? Want to reorganize? You can change any message&#39;s topic:</p>
        <ol>
        <li>Navigate to the message in View Mode</li>
        <li>Press <kbd>Ctrl+T</kbd> to open the topic picker</li>
        <li>Select the new topic</li>
        </ol>
        <p>The message immediately moves to the new topic. This works on both user requests and assistant responses.</p>
        <h3 id="topic-hierarchy-best-practices">Topic Hierarchy Best Practices</h3>
        <p><strong>Start broad, go deep gradually:</strong></p>
        <pre><code>✓ Good progression:
          Work
          Work &gt; Client Projects
          Work &gt; Client Projects &gt; Acme Corp
          Work &gt; Client Projects &gt; Acme Corp &gt; Q4 Campaign

        ✗ Avoid premature detail:
          Work &gt; Client Projects &gt; Acme Corp &gt; Q4 Campaign &gt; Week 1 &gt; Monday
        </code></pre>
        <p><strong>Use 2-4 levels typically:</strong></p>
        <ul>
        <li><strong>Level 1:</strong> Major life areas (Work, Personal, Learning)</li>
        <li><strong>Level 2:</strong> Broad categories (Coding, Writing, Research)</li>
        <li><strong>Level 3:</strong> Specific projects or themes (Python, Blog Posts, AI Papers)</li>
        <li><strong>Level 4:</strong> Occasional subcategories (only when clearly needed)</li>
        </ul>
        <p><strong>Common patterns:</strong></p>
        <p><strong>By domain:</strong></p>
        <pre><code>
        Work
          ├─ Projects
          ├─ Meetings
          └─ Documentation
        Personal
          ├─ Health
          ├─ Finance
          └─ Travel
        Learning
          ├─ Programming
          ├─ Languages
          └─ History
        </code></pre>
        <p><strong>By project:</strong></p>
        <pre><code>
        Projects
          ├─ Website Redesign
          │   ├─ Frontend
          │   ├─ Backend
          │   └─ Content
          └─ Mobile App
              ├─ iOS
              └─ Android
        </code></pre>
        <p><strong>By technology:</strong></p>
        <pre><code>
        Coding
          ├─ Python
          ├─ JavaScript
          ├─ SQL
          └─ DevOps
        </code></pre>
        <h3 id="topic-naming-tips">Topic Naming Tips</h3>
        <ul>
        <li><strong>Be specific but not too narrow:</strong> &quot;Python Web Scraping&quot; is better than just &quot;Python&quot; or &quot;BeautifulSoup Tutorial Chapter 3&quot;</li>
        <li><strong>Use consistent patterns:</strong> If you abbreviate, do it consistently (e.g., &quot;JS&quot; vs &quot;JavaScript&quot;)</li>
        <li><strong>Keep names short:</strong> Long names clutter the UI and are harder to filter</li>
        <li><strong>Avoid dates in names:</strong> Use date filters (<code>d<7d</code>) instead of &quot;January 2025 Work&quot;</li>
        </ul>
        <h3 id="filtering-by-topics">Filtering by Topics</h3>
        <p>Once you have topics organized, filtering becomes powerful:</p>
        <p><strong>Show single topic:</strong></p>
        <ul>
        <li><code>t'Work'</code> — Only &quot;Work&quot; topic (exact match)</li>
        <li><kbd>t</kbd> — Current topic (whatever&#39;s selected in Input Mode)</li>
        </ul>
        <p><strong>Show topic branch:</strong></p>
        <ul>
        <li><code>t'Work...'</code> — &quot;Work&quot; and all subtopics (recursive)</li>
        <li><code>t'Coding...'</code> — Everything under &quot;Coding&quot;</li>
        </ul>
        <p><strong>Wildcards:</strong></p>
        <ul>
        <li><code>t'*Python*'</code> — Any topic containing &quot;Python&quot;</li>
        <li><code>t'Work > *'</code> — Direct children of &quot;Work&quot; only</li>
        </ul>
        <p><strong>Combine with other filters:</strong></p>
        <ul>
        <li><code>t'Coding...' & d<7d</code> — Recent coding conversations</li>
        <li><code>t'Work...' & s>=2</code> — Important work messages</li>
        <li><code>(t'Python...' | t'JavaScript...') & c'error'</code> — Errors in either language</li>
        </ul>
        <p>See the <a href="#filtering">Search &amp; Filtering</a> section for complete filter syntax.</p>
        <h3 id="archive-pattern">Archive Pattern</h3>
        <p>Create an &quot;Archive&quot; topic for old conversations you want to keep but rarely need:</p>
        <pre><code>
        Archive
          ├─ 2024
          └─ 2025
        </code></pre>
        <p>Then filter them out by default: <code>!t'Archive...'</code></p>
        <h3 id="when-to-split-topics">When to Split Topics</h3>
        <p>Consider creating a subtopic when:</p>
        <ul>
        <li>A topic has 50+ messages and distinct themes emerge</li>
        <li>You find yourself wanting to filter within a topic</li>
        <li>Multiple unrelated conversations share a topic</li>
        <li>A project or theme becomes significant enough to track separately</li>
        </ul>
        <p>Don&#39;t create subtopics prematurely. Let your usage patterns guide the structure.</p>
        <h3 id="topic-metadata-advanced">Topic Metadata (Advanced)</h3>
        <p>Topics can have additional settings:</p>
        <p><strong>System message:</strong></p>
        <ul>
        <li>Custom instructions for that topic branch</li>
        <li>Press <kbd>Ctrl+E</kbd> on a topic in the Topic Editor</li>
        <li>Inherited by child topics unless overridden</li>
        </ul>
        <p><strong>Temperature:</strong></p>
        <ul>
        <li>Control creativity (0.0-2.0)</li>
        <li>Press <kbd>Ctrl+T</kbd> on a topic in the Topic Editor</li>
        </ul>
        <p><strong>Max response length:</strong></p>
        <ul>
        <li>Limit assistant response tokens</li>
        <li>Press <kbd>Ctrl+L</kbd> on a topic in the Topic Editor</li>
        </ul>
        <p>These are optional and most users can ignore them initially.</p>
        <h3 id="common-questions">Common Questions</h3>
        <p><strong>Q: Can a message belong to multiple topics?</strong><br>A: No. Each message has exactly one topic. This keeps things simple and unambiguous.</p>
        <p><strong>Q: What happens if I delete a topic with messages?</strong><br>A: MaiChat requires you to reassign those messages first. No accidental data loss.</p>
        <p><strong>Q: Can I export/import topic structures?</strong><br>A: Yes! See the <a href="#settings">Settings &amp; Tools</a> section for export/import options.</p>
        <p><strong>Q: Do topics affect what&#39;s sent to the model?</strong><br>A: Not directly. But you can filter by topic before sending to control context. The topic&#39;s system message (if set) is also included.</p>
      </section>

      <section id="filtering">
<h2 id="filtering">Search and Filtering Language</h2>
        <p>MaiChat&#39;s filtering language is one of its most powerful features. It lets you slice your message history by any combination of topic, model, date, content, ratings, and more — all with terse, keyboard-friendly commands.</p>
        <h3 id="why-filter">Why Filter?</h3>
        <p>Filtering serves three main purposes:</p>
        <ol>
        <li><strong>Find specific conversations:</strong> Quickly locate messages about a topic, from a date, or containing keywords</li>
        <li><strong>Focus your view:</strong> See only what matters right now, reducing clutter</li>
        <li><strong>Control context:</strong> Filter before sending a new message to include only relevant history</li>
        </ol>
        <blockquote>
        <p><strong>Quick tip:</strong> Press <kbd>Ctrl+D</kbd> (or <kbd>Esc</kbd> from View Mode) to enter Command Mode and start filtering.</p>
        </blockquote>
        <h3 id="basic-filters">Basic Filters</h3>
        <p>Each filter targets a specific attribute of your message pairs (user request + assistant response).</p>
        <p><strong>Topic:</strong> <code>t'work'</code></p>
        <ul>
        <li>Match messages by topic name</li>
        <li>Case-insensitive</li>
        <li>Supports paths, wildcards, and descendants (see <a href="#topic-patterns-case-insensitive">Topic Patterns</a>)</li>
        </ul>
        <p><strong>Content:</strong> <code>c'error budget'</code></p>
        <ul>
        <li>Search for text within messages</li>
        <li>Searches both user requests and assistant responses</li>
        <li>Use <code>*</code> as wildcard: <code>c'*error*'</code></li>
        </ul>
        <p><strong>Model:</strong> <code>m'gpt-4o-mini'</code></p>
        <ul>
        <li>Filter by which model generated the response</li>
        <li>Wildcards supported: <code>m'gpt*'</code> matches all GPT models</li>
        <li>Bare <kbd>m</kbd> (no quotes) uses your currently selected model</li>
        </ul>
        <p><strong>Date:</strong> <code>d2025-10-08</code></p>
        <ul>
        <li>Exact calendar day in your local timezone</li>
        <li>Or relative age: <code>d<7d</code> (last 7 days)</li>
        <li>Units: <kbd>h</kbd> (hours), <kbd>d</kbd> (days), <kbd>w</kbd> (weeks), <code>mo</code> (months), <kbd>y</kbd> (years)</li>
        </ul>
        <p><strong>Recent count:</strong> <code>r30</code></p>
        <ul>
        <li>Show last N message pairs by absolute recency</li>
        <li>Common shortcuts: <code>r1</code>, <code>r10</code>, <code>r50</code></li>
        <li>Ignores all other context; just gives you the most recent</li>
        </ul>
        <p><strong>Stars:</strong> <code>s3</code> or <code>s>=2</code></p>
        <ul>
        <li>Filter by your star ratings (0-3)</li>
        <li><code>s3</code> — exactly 3 stars</li>
        <li><code>s>=2</code> — 2 or 3 stars</li>
        <li><code>s0</code> — unrated messages</li>
        </ul>
        <p><strong>Flagged:</strong> <kbd>b</kbd> or <kbd>g</kbd></p>
        <ul>
        <li><kbd>b</kbd> — blue square flag</li>
        <li><kbd>g</kbd> — grey circle flag</li>
        <li>Use flags for quick visual organization</li>
        </ul>
        <p><strong>Errors:</strong> <kbd>e</kbd></p>
        <ul>
        <li>Show only message pairs where the assistant response failed</li>
        <li>Useful for troubleshooting API issues</li>
        </ul>
        <blockquote>
        <p><strong>Tip:</strong> The simplest and most common filter is just <kbd>t</kbd> (without quotes) — it shows only messages from your currently selected topic. This is a quick way to focus on one conversation thread.</p>
        </blockquote>
        <h3 id="combining-filters">Combining Filters</h3>
        <p>The real power comes from combining filters with logical operators.</p>
        <p><strong>AND (space or &amp;):</strong></p>
        <pre><code>r20 s&gt;=2
        </code></pre>
        <p>Last 20 pairs that are rated 2+ stars. Space means AND.</p>
        <pre><code>t&#39;Work&#39; d&lt;7d
        </code></pre>
        <p>Work messages from the last 7 days.</p>
        <p><strong>OR (| or +):</strong></p>
        <pre><code>m&#39;gpt*&#39; | m&#39;claude*&#39;
        </code></pre>
        <p>Messages from either GPT or Claude models.</p>
        <pre><code>s3 | b
        </code></pre>
        <p>3-star messages OR blue-flagged messages.</p>
        <p><strong>NOT (!):</strong></p>
        <pre><code>!t&#39;Archive...&#39;
        </code></pre>
        <p>Everything EXCEPT Archive topic and its subtopics.</p>
        <pre><code>d&lt;30d &amp; !e
        </code></pre>
        <p>Last 30 days, excluding errors.</p>
        <p><strong>Parentheses for grouping:</strong></p>
        <pre><code>(t&#39;Python...&#39; | t&#39;JavaScript...&#39;) &amp; c&#39;error&#39;
        </code></pre>
        <p>Errors in either Python or JavaScript topics.</p>
        <pre><code>t&#39;Coding...&#39; &amp; (s3 | b)
        </code></pre>
        <p>Coding messages that are either 3-starred OR blue-flagged.</p>
        <p><strong>Operator precedence:</strong></p>
        <ul>
        <li><code>()</code> — Parentheses (highest priority)</li>
        <li><code>!</code> — NOT</li>
        <li><code>&</code> and adjacency (space) — AND</li>
        <li><code>|</code> and <code>+</code> — OR (lowest priority)</li>
        </ul>
        <h3 id="topic-patterns-case-insensitive">Topic Patterns (Case-Insensitive)</h3>
        <p>Topics support powerful pattern matching:</p>
        <p><strong>Exact match:</strong></p>
        <ul>
        <li><code>t'AI'</code> — Only the &quot;AI&quot; topic (not children)</li>
        <li><code>t'AI > Transformers > GPT'</code> — Full path match</li>
        </ul>
        <p><strong>Descendants (...):</strong></p>
        <ul>
        <li><code>t'AI...'</code> — AI topic AND all its subtopics (recursive)</li>
        <li><code>t'Work...'</code> — Everything under Work</li>
        </ul>
        <p><strong>Wildcards (*):</strong></p>
        <ul>
        <li><code>t'*Learning'</code> — Any topic ending with &quot;Learning&quot;</li>
        <li><code>t'Machine*'</code> — Any topic starting with &quot;Machine&quot;</li>
        <li><code>t'*Neural*'</code> — Any topic containing &quot;Neural&quot;</li>
        </ul>
        <p><strong>Combinations:</strong></p>
        <ul>
        <li><code>t'*AI*...'</code> — Topics containing &quot;AI&quot; and all their descendants</li>
        <li><code>t'Work > *'</code> — Direct children of Work only (not recursive)</li>
        </ul>
        <p><strong>Bare t:</strong></p>
        <ul>
        <li><kbd>t</kbd> — Use currently selected topic from Input Mode</li>
        </ul>
        <h3 id="model-patterns-case-insensitive">Model Patterns (Case-Insensitive)</h3>
        <p>Similar to topics, model filters support patterns:</p>
        <p><strong>Exact ID:</strong></p>
        <ul>
        <li><code>m'gpt-4o'</code></li>
        <li><code>m'claude-3.5-sonnet'</code></li>
        </ul>
        <p><strong>Wildcards:</strong></p>
        <ul>
        <li><code>m'gpt*'</code> — All GPT models</li>
        <li><code>m'*mini*'</code> — Any model with &quot;mini&quot; in the name</li>
        <li><code>m'claude*'</code> — All Claude models</li>
        </ul>
        <p><strong>Bare m:</strong></p>
        <ul>
        <li><kbd>m</kbd> — Use currently selected model from Input Mode</li>
        </ul>
        <p><strong>Common comparisons:</strong></p>
        <pre><code>(m&#39;gpt-4*&#39; | m&#39;claude*&#39;) &amp; t&#39;Coding...&#39;
        </code></pre>
        <p>Compare GPT-4 vs Claude on coding questions.</p>
        <h3 id="date-filters">Date Filters</h3>
        <p>Dates are flexible and support both absolute and relative forms.</p>
        <p><strong>Absolute dates:</strong></p>
        <ul>
        <li><code>d2025-10-08</code> — Exact day (local timezone)</li>
        <li><code>d>=2025-01-01</code> — On or after January 1</li>
        <li><code>d<2025-12-31</code> — Before December 31</li>
        </ul>
        <p><strong>Relative ages:</strong></p>
        <ul>
        <li><code>d<24h</code> — Last 24 hours</li>
        <li><code>d<7d</code> — Last 7 days (omit unit = days by default)</li>
        <li><code>d<=2w</code> — Last 2 weeks or less</li>
        <li><code>d<6mo</code> — Last 6 months</li>
        <li><code>d<1y</code> — Last year</li>
        </ul>
        <p><strong>Date ranges (AND two filters):</strong></p>
        <p>Closed interval (inclusive):</p>
        <pre><code>d&gt;=2025-09-01 &amp; d&lt;=2025-09-30
        </code></pre>
        <p>All of September 2025.</p>
        <p>Relative age range:</p>
        <pre><code>d&gt;=3d &amp; d&lt;=14d
        </code></pre>
        <p>Messages between 3 and 14 days old.</p>
        <p>Half-open range:</p>
        <pre><code>d&gt;=2025-01-01 &amp; d&lt;2025-02-01
        </code></pre>
        <p>January 2025 (excludes February 1).</p>
        <p><strong>Default unit is days:</strong></p>
        <ul>
        <li><code>d<7</code> ≡ <code>d<7d</code></li>
        <li><code>d>=30</code> ≡ <code>d>=30d</code></li>
        </ul>
        <h3 id="filter-examples">Practical Examples</h3>
        <p>Here are real-world filtering scenarios you can copy and adapt:</p>
        <p><strong>Review recent important conversations:</strong></p>
        <pre><code>r30 &amp; s&gt;=2
        </code></pre>
        <p>Last 30 pairs that you rated highly.</p>
        <p><strong>Find all discussions about a bug:</strong></p>
        <pre><code>c&#39;authentication&#39; &amp; c&#39;bug&#39; &amp; t&#39;Work...&#39;
        </code></pre>
        <p>Work messages containing both &quot;authentication&quot; and &quot;bug&quot;.</p>
        <p><strong>Compare model outputs on a topic:</strong></p>
        <pre><code>(m&#39;gpt-4*&#39; | m&#39;claude*&#39;) &amp; t&#39;Writing...&#39;
        </code></pre>
        <p>See which model you used for writing tasks.</p>
        <p><strong>Recent conversations excluding archives:</strong></p>
        <pre><code>d&lt;14d &amp; !t&#39;Archive...&#39;
        </code></pre>
        <p>Last 2 weeks of active conversations.</p>
        <p><strong>Flagged or highly-rated research:</strong></p>
        <pre><code>(b | s3) &amp; t&#39;Research...&#39;
        </code></pre>
        <p>Your marked or 3-starred research messages.</p>
        <p><strong>Debug recent API errors:</strong></p>
        <pre><code>e &amp; d&lt;7d
        </code></pre>
        <p>Failed requests from the last week.</p>
        <p><strong>Find conversations about Python errors:</strong></p>
        <pre><code>t&#39;Python...&#39; &amp; c&#39;error&#39; &amp; !e
        </code></pre>
        <p>Python discussions mentioning &quot;error&quot; but not actual API failures.</p>
        <p><strong>Weekly review of all topics:</strong></p>
        <pre><code>d&gt;=7d &amp; d&lt;14d
        </code></pre>
        <p>Messages from 1-2 weeks ago (last week).</p>
        <p><strong>Current topic, recent, highly rated:</strong></p>
        <pre><code>t &amp; d&lt;30d &amp; s&gt;=2
        </code></pre>
        <p>Great recent messages in your active topic.</p>
        <h3 id="workflow-tips">Workflow Tips</h3>
        <p><strong>Start broad, then narrow:</strong></p>
        <ol>
        <li><code>t'Coding...'</code> — See all coding</li>
        <li><code>t'Coding...' & d<30d</code> — Add time constraint</li>
        <li><code>t'Coding...' & d<30d & m'gpt*'</code> — Narrow to GPT models</li>
        </ol>
        <p><strong>Save common filters as commands:</strong>
        The command input has history (<kbd>Ctrl+P</kbd>/<kbd>Ctrl+N</kbd>). Your frequent filters are remembered.</p>
        <p><strong>Filter before sending:</strong>
        Apply a filter, verify your visible context, then <kbd>Ctrl+I</kbd> to compose a message with that context.</p>
        <p><strong>Use filters for retrospective organization:</strong>
        Find unrated messages: <code>s0 & d<7d</code> — rate them while fresh.</p>
        <p><strong>Combine with View Mode actions:</strong>
        Filter to a set, then navigate (<kbd>j</kbd>/<kbd>k</kbd>) and rate (<kbd>1</kbd>/<kbd>2</kbd>/<kbd>3</kbd>) or flag (<kbd>a</kbd>) them.</p>
        <h3 id="command-mode-shortcuts">Command Mode Shortcuts</h3>
        <p>When typing filters in Command Mode:</p>
        <ul>
        <li><kbd>Enter</kbd> — Apply filter and switch to View Mode</li>
        <li><kbd>Esc</kbd> — Clear input (stays in Command Mode)</li>
        <li><kbd>Ctrl+P</kbd> — Previous command from history</li>
        <li><kbd>Ctrl+N</kbd> — Next command from history</li>
        <li><kbd>Ctrl+A</kbd> — Move to start of line</li>
        <li><kbd>Ctrl+E</kbd> — Move to end of line</li>
        <li><kbd>Ctrl+U</kbd> — Delete from cursor to start</li>
        <li><kbd>Ctrl+W</kbd> — Delete previous word</li>
        </ul>
        <h3 id="common-mistakes">Common Mistakes</h3>
        <p><strong>Forgetting quotes:</strong></p>
        <ul>
        <li>✗ <code>t'work</code> — Missing closing quote</li>
        <li>✓ <code>t'work'</code></li>
        </ul>
        <p><strong>Using commas instead of operators:</strong></p>
        <ul>
        <li>✗ <code>t'work', d<7d</code> — Comma doesn&#39;t work</li>
        <li>✓ <code>t'work' & d<7d</code> or just <code>t'work' d<7d</code></li>
        </ul>
        <p><strong>Wrong wildcard syntax:</strong></p>
        <ul>
        <li>✗ <code>t'work*...'</code> — Wildcard and dots don&#39;t mix well</li>
        <li>✓ <code>t'work...'</code> — Just use dots for descendants</li>
        </ul>
        <p><strong>Confusing NOT with exclusion:</strong></p>
        <ul>
        <li>✗ <code>!s3</code> alone often too broad</li>
        <li>✓ <code>r50 & !s0</code> — Recent non-zero-rated (more useful)</li>
        </ul>
        <blockquote>
        <p><strong>Quick reference:</strong> Press <kbd>F1</kbd> anytime to see the compact filter syntax cheatsheet in the help overlay.</p>
        </blockquote>
      </section>

      <section id="context">
<h2 id="context">Context Management</h2>
        <p>One of MaiChat&#39;s most important features is giving you <strong>precise control over what context gets sent to the AI model</strong>. Unlike standard chat interfaces where you can&#39;t see how far back the model&#39;s &quot;memory&quot; extends, MaiChat shows you exactly which messages are in-context and lets you control the selection.</p>
        <h3 id="why-context-matters">Why Context Matters</h3>
        <p>The context you send affects:</p>
        <ol>
        <li><strong>Response quality:</strong> Relevant history helps the model understand your needs</li>
        <li><strong>Token costs:</strong> Less context = lower API costs</li>
        <li><strong>Response time:</strong> Smaller requests are faster</li>
        <li><strong>Focus:</strong> Too much irrelevant context can confuse the model</li>
        </ol>
        <p><strong>MaiChat&#39;s approach: Visible, flexible control</strong></p>
        <p>MaiChat gives you:</p>
        <ul>
        <li><strong>Flexible composition:</strong> Use filters + metadata (topics, stars, flags) to select which messages are candidates for context</li>
        <li><strong>Visual feedback:</strong> See exactly what&#39;s in-context and what&#39;s not</li>
        <li><strong>Direct control:</strong> What you choose to filter is what gets sent (as long as it fits the model&#39;s limits)</li>
        <li><strong>Multiple strategies:</strong> Filter by topic, date, rating, model, content — or any combination</li>
        </ul>
        <p><strong>Example:</strong> Send only your highly-rated Python conversations from the last month:</p>
        <pre><code>t&#39;Python...&#39; &amp; s&gt;=2 &amp; d&lt;30d
        </code></pre>
        <p>This level of control helps you balance quality, cost, and relevance for every request.</p>
        <h3 id="what-gets-sent">What Gets Sent?</h3>
        <p>When you send a message, MaiChat includes three things:</p>
        <ol>
        <li><strong>Your new user request</strong> — what you just typed</li>
        <li><strong>The topic&#39;s system message</strong> — if your current topic has one configured (custom instructions)</li>
        <li><strong>Selected conversation history</strong> — the messages you&#39;ve chosen through filtering</li>
        </ol>
        <p><strong>How history selection works:</strong></p>
        <ul>
        <li>You use <strong>filters</strong> to select which messages are candidates (e.g., <code>t'Python...'</code>, <code>d<7d</code>, <code>s>=2</code>)</li>
        <li>MaiChat takes your <strong>filtered/visible messages</strong> and includes as many as fit the model&#39;s context window</li>
        <li>Newest messages are included first, working backward in time</li>
        <li>The app shows you <strong>visually</strong> which messages are in-context (will be sent) and which are off-context (won&#39;t be sent)</li>
        </ul>
        <p><strong>Typical workflow:</strong></p>
        <p>In most cases, your filtered history will <strong>fit completely</strong> into the context. For example:</p>
        <ul>
        <li>Filter to current topic: <kbd>t</kbd> → 25 messages → all 25 fit ✓</li>
        <li>Filter to recent starred: <code>s>=2 & d<30d</code> → 15 messages → all 15 fit ✓</li>
        <li>Filter to specific project: <code>t'Project X...'</code> → 40 messages → all 40 fit ✓</li>
        </ul>
        <p><strong>When trimming occurs:</strong></p>
        <p>If your filtered history is very large (hundreds of messages) or you&#39;re using a small context model, MaiChat may need to trim older messages to fit the token limit. You&#39;ll see this happen and can:</p>
        <ul>
        <li>Apply a more restrictive filter to focus on what matters most</li>
        <li>Switch to a larger context model (e.g., Claude 3.5 Sonnet with 200K tokens)</li>
        <li>Accept the automatic trimming (often the best choice — newest messages usually matter most)</li>
        </ul>
        <p>The key point: <strong>You see what gets sent</strong>. The app marks which messages are in-context, so there are no surprises.</p>
        <h3 id="the-context-boundary">The Context Boundary</h3>
        <p>The <strong>context boundary</strong> is the dividing line between messages that will be sent to the model (in-context) and messages that won&#39;t be sent (off-context).</p>
        <p><strong>Why you need to see this:</strong></p>
        <p>Knowing where the boundary is lets you:</p>
        <ul>
        <li>Verify that important messages are included</li>
        <li>Understand if you need to filter more restrictively</li>
        <li>See at a glance how much context you&#39;re sending</li>
        <li>Make informed decisions about whether to adjust your filter</li>
        </ul>
        <p><strong>How MaiChat shows you the boundary:</strong></p>
        <ul>
        <li><strong>In-context messages</strong> appear at normal brightness</li>
        <li><strong>Off-context messages</strong> are dimmed (grayed out) with an &quot;off&quot; badge in their meta line</li>
        <li>This visual distinction makes it instantly clear what the model will see</li>
        </ul>
        <p><strong>Checking the boundary:</strong></p>
        <p>Press <kbd>o</kbd> or <kbd>Shift+O</kbd> in View Mode to jump directly to the first in-context message (the boundary point). The view centers on this message so you can easily review what&#39;s included.</p>
        <h3 id="the-message-counter-top-right">The Message Counter (Top-Right)</h3>
        <p>The message counter shows context status at a glance:</p>
        <p><strong>Basic format: <code>X/Y</code></strong></p>
        <ul>
        <li><kbd>X</kbd> = Predicted in-context pairs (will be sent)</li>
        <li><kbd>Y</kbd> = Currently visible pairs (after filtering)</li>
        </ul>
        <p><strong>Example:</strong> <code>15/42</code> means 15 pairs will be sent out of 42 visible.</p>
        <p><strong>Prefix: <code>(-) </code></strong></p>
        <ul>
        <li>Means your newest message is hidden by the current filter</li>
        <li><strong>Warning:</strong> You won&#39;t be able to send with this filter active!</li>
        </ul>
        <p><strong>Trim indicator: <code>[S-T]/Y</code></strong></p>
        <ul>
        <li><kbd>S</kbd> = Pairs actually sent (after trimming)</li>
        <li><kbd>T</kbd> = Pairs trimmed out (didn&#39;t fit)</li>
        <li><kbd>Y</kbd> = Visible pairs</li>
        </ul>
        <p><strong>Example:</strong> <code>[12-3]/42</code> means 12 pairs sent, 3 were trimmed, 42 visible.</p>
        <p><strong>Hover for details:</strong>
        The counter&#39;s tooltip shows:</p>
        <ul>
        <li>Predicted token count</li>
        <li>Whether URA (User Request Allowance) is active</li>
        <li>How many pairs were trimmed on the last send</li>
        <li>Current model&#39;s context window size</li>
        </ul>
        <h3 id="how-context-is-computed">How Context is Computed</h3>
        <p>MaiChat uses a <strong>prediction algorithm</strong> before you send:</p>
        <ol>
        <li><strong>Start with visible history</strong> (after any filters)</li>
        <li><strong>Count tokens</strong> for each pair (user + assistant)</li>
        <li><strong>Reserve URA tokens</strong> for your new request + expected response (default: 600)</li>
        <li><strong>Include pairs from newest to oldest</strong> until space runs out</li>
        <li><strong>Mark the boundary</strong> and dim older messages</li>
        </ol>
        <p><strong>Model-dependent:</strong></p>
        <ul>
        <li>Each model has a different context window (tokens it can handle)</li>
        <li>GPT-4o: 128K tokens</li>
        <li>Claude 3.5 Sonnet: 200K tokens</li>
        <li>Switching models changes the boundary!</li>
        </ul>
        <p><strong>Settings that affect context:</strong></p>
        <ul>
        <li><strong>userRequestAllowance (URA):</strong> Default 600. Higher = more room for your new message, but less history included</li>
        <li><strong>charsPerToken (CPT):</strong> Default 4. Estimation factor (4 chars ≈ 1 token)</li>
        <li><strong>maxTrimAttempts:</strong> How many times to retry if the initial prediction is too large</li>
        </ul>
        <h3 id="context-control-strategies">Context Control Strategies</h3>
        <p><strong>1. Use filters before sending:</strong></p>
        <pre><code>t&#39;Python...&#39; &amp; d&lt;7d
        </code></pre>
        <p>Only include recent Python conversations, then send your question.</p>
        <p><strong>2. Switch to a larger context model:</strong></p>
        <p>Press <kbd>Ctrl+M</kbd> and choose a model with a bigger window if you need more history.</p>
        <p><strong>3. Adjust URA in settings:</strong></p>
        <ul>
        <li><strong>Lower URA</strong> (e.g., 400) = more history fits, less room for your new message</li>
        <li><strong>Higher URA</strong> (e.g., 800) = fewer history pairs, more room for complex prompts</li>
        </ul>
        <p><strong>4. Star and filter important messages:</strong></p>
        <p>Rate key messages with <kbd>1</kbd>/<kbd>2</kbd>/<kbd>3</kbd>, then filter by <code>s>=2</code> to include only high-quality context.</p>
        <p><strong>5. Review the boundary:</strong></p>
        <p>Press <kbd>o</kbd> before sending to see what&#39;s included. If something important is off-context, apply a filter to bring it in.</p>
        <h3 id="understanding-token-trimming">Understanding Token Trimming</h3>
        <p>Sometimes MaiChat&#39;s prediction is slightly off (different models count tokens differently). When this happens:</p>
        <ol>
        <li><strong>Initial send fails</strong> (too many tokens)</li>
        <li><strong>MaiChat trims</strong> the oldest included pair</li>
        <li><strong>Retries</strong> up to <code>maxTrimAttempts</code> times</li>
        <li><strong>Updates the counter</strong> to show <code>[S-T]/Y</code> format</li>
        </ol>
        <p><strong>Example scenario:</strong></p>
        <ul>
        <li>Predicted: 15 pairs would fit</li>
        <li>Actual: Only 12 pairs fit</li>
        <li>Result: <code>[12-3]/42</code> (3 pairs trimmed)</li>
        </ul>
        <p>This is normal and automatic. You&#39;ll see the trim indicator briefly after sending.</p>
        <h3 id="practical-examples">Practical Examples</h3>
        <p><strong>Review before sending:</strong></p>
        <ol>
        <li>Type your message in Input Mode</li>
        <li>Press <kbd>Esc</kbd> to enter View Mode</li>
        <li>Press <kbd>o</kbd> to jump to context boundary</li>
        <li>Review what&#39;s in-context</li>
        <li>Apply filters if needed: <kbd>Ctrl+D</kbd>, type filter, <kbd>Enter</kbd></li>
        <li>Press <kbd>Ctrl+I</kbd> to return to Input Mode and send</li>
        </ol>
        <p><strong>Focus on recent conversations:</strong></p>
        <pre><code>d&lt;7d
        </code></pre>
        <p>Only include messages from the last week, reducing noise from old conversations.</p>
        <p><strong>Include only important messages:</strong></p>
        <pre><code>s&gt;=2 &amp; t&#39;Work...&#39;
        </code></pre>
        <p>Only highly-rated work messages.</p>
        <p><strong>Deep context for complex questions:</strong></p>
        <ol>
        <li>Switch to Claude 3.5 Sonnet (200K context)</li>
        <li>Filter to relevant topic: <code>t'Project X...'</code></li>
        <li>Check counter: <kbd>o</kbd> to see boundary</li>
        <li>Send complex question requiring lots of context</li>
        </ol>
        <p><strong>Minimal context for quick questions:</strong></p>
        <pre><code>r5
        </code></pre>
        <p>Only last 5 pairs — fast and cheap for simple follow-ups.</p>
        <h3 id="common-patterns">Common Patterns</h3>
        <p><strong>Daily workflow:</strong></p>
        <ul>
        <li>Use <kbd>t</kbd> filter to focus on current topic</li>
        <li>Check counter occasionally to ensure context size is reasonable</li>
        <li>Press <kbd>o</kbd> when you want to verify what&#39;s being sent</li>
        </ul>
        <p><strong>Research/analysis:</strong></p>
        <ul>
        <li>Filter by topic and date: <code>t'Research...' & d<30d</code></li>
        <li>Use larger context models</li>
        <li>Review boundary before sending complex queries</li>
        </ul>
        <p><strong>Cost optimization:</strong></p>
        <ul>
        <li>Use smaller models (mini/flash) with filtered context</li>
        <li>Check counter to avoid sending unnecessary history</li>
        <li>Star important messages, filter by stars before sending</li>
        </ul>
        <p><strong>Debugging context issues:</strong></p>
        <ul>
        <li>Hover over message counter for token details</li>
        <li>Press <kbd>o</kbd> to see boundary</li>
        <li>Check if important messages are dimmed</li>
        <li>Adjust filter or URA settings</li>
        </ul>
        <h3 id="advanced-context-and-system-messages">Advanced: Context and System Messages</h3>
        <p>If your current topic (or any ancestor) has a <strong>system message</strong> set:</p>
        <ul>
        <li>It&#39;s automatically included in every request</li>
        <li>It doesn&#39;t count against your URA</li>
        <li>It appears at the beginning of the context</li>
        <li>Useful for role-setting or custom instructions</li>
        </ul>
        <p>Set system messages in the Topic Editor (<kbd>Ctrl+Shift+T</kbd>), then press <kbd>Ctrl+E</kbd> on a topic.</p>
        <h3 id="troubleshooting">Troubleshooting</h3>
        <p><strong>&quot;My important message isn&#39;t being sent!&quot;</strong></p>
        <ul>
        <li>Check if it&#39;s dimmed (off-context)</li>
        <li>Press <kbd>o</kbd> to see the boundary</li>
        <li>Apply a filter to bring it into context, or increase URA</li>
        </ul>
        <p><strong>&quot;Counter shows (-) prefix&quot;</strong></p>
        <ul>
        <li>Your newest message is hidden by your filter</li>
        <li>Clear the filter (<kbd>Esc</kbd> in Command Mode) before sending</li>
        </ul>
        <p><strong>&quot;Trim indicator keeps appearing&quot;</strong></p>
        <ul>
        <li>Your messages are close to the token limit</li>
        <li>Use a larger context model, or filter more aggressively</li>
        </ul>
        <p><strong>&quot;Context seems wrong after filtering&quot;</strong></p>
        <ul>
        <li>Remember: filters affect what&#39;s visible AND what&#39;s sent</li>
        <li>Clear filters to reset: <kbd>Esc</kbd> in Command Mode</li>
        </ul>
        <p><strong>&quot;How do I know exact token count?&quot;</strong></p>
        <ul>
        <li>Hover over the message counter tooltip</li>
        <li>Or append <code>?reqdbg=1</code> to URL for Request Debug overlay</li>
        </ul>
        <h3 id="key-takeaways">Key Takeaways</h3>
        <p>✓ <strong>The context boundary</strong> determines what gets sent — press <kbd>o</kbd> to see it<br>✓ <strong>The message counter</strong> (<code>X/Y</code>) shows predicted context size<br>✓ <strong>Filters control context</strong> — apply them before sending<br>✓ <strong>Different models</strong> have different context windows<br>✓ <strong>URA setting</strong> balances new message space vs history inclusion<br>✓ <strong>Visual dimming</strong> shows off-context messages clearly<br>✓ <strong>Token trimming</strong> is automatic when predictions are slightly off</p>
      </section>

      <section id="models">
<h2 id="models">API Keys and Model Catalogue</h2>
        <p>MaiChat connects to AI providers through their APIs. To use the app, you need to set up API keys and understand how to manage your model catalog.</p>
        <h3 id="setting-up-api-keys">Setting Up API Keys</h3>
        <p><strong>Important: Bring Your Own Key (BYOK)</strong></p>
        <p>MaiChat is <strong>completely free</strong> — you pay nothing to use the app itself. Instead, you use your own API keys from AI providers, and you pay them directly based on your usage.</p>
        <ul>
        <li><strong>You register</strong> with OpenAI, Anthropic, and/or Google (see details below)</li>
        <li><strong>You obtain</strong> your own API keys from their platforms</li>
        <li><strong>You pay</strong> the providers directly for API usage</li>
        <li><strong>MaiChat cost:</strong> $0 (the app is free)</li>
        <li><strong>AI provider cost:</strong> Pay-as-you-go or subscription plans</li>
        </ul>
        <p><strong>Free tiers and costs:</strong></p>
        <ul>
        <li><strong>OpenAI:</strong> No free tier; pay per token (roughly $2-20 per 1M tokens depending on model. 1M tokens corresponds to 1200-1500 typical chat messages)</li>
        <li><strong>Anthropic:</strong> Some credits for new users; similar pricing to OpenAI</li>
        <li><strong>Google (Gemini):</strong> Generous free tier (15 requests/min, 1M tokens/day for Gemini 1.5 Flash)</li>
        <li><strong>Typical usage:</strong> Light use might cost $5-20/month; heavy use $50-100+/month</li>
        </ul>
        <p>Check each provider&#39;s website for current pricing and free tier details.</p>
        <p>MaiChat supports three major AI providers. You need at least one API key to use the app.</p>
        <p><strong>Opening API Keys settings:</strong></p>
        <ul>
        <li>Press <kbd>Ctrl+K</kbd> from any mode</li>
        <li>Or use the menu: <kbd>Ctrl+.</kbd> → API Keys</li>
        </ul>
        <p><strong>Supported providers:</strong></p>
        <ol>
        <li><p><strong>OpenAI</strong> (ChatGPT models)</p>
        <ul>
        <li>Get your key at <a href="https://platform.openai.com/api-keys">platform.openai.com/api-keys</a></li>
        <li>Models: GPT-5, GPT-5 mini, GPT-5 nano, o4-mini</li>
        </ul>
        </li>
        <li><p><strong>Anthropic</strong> (Claude models)</p>
        <ul>
        <li>Get your key at <a href="https://console.anthropic.com">console.anthropic.com</a></li>
        <li>Models: Claude Sonnet 4.5, Claude Opus 4.1, Claude 3.5 Haiku</li>
        </ul>
        </li>
        <li><p><strong>Google</strong> (Gemini models)</p>
        <ul>
        <li>Get your key at <a href="https://aistudio.google.com/apikey">aistudio.google.com/apikey</a></li>
        <li>Models: Gemini 2.5 Pro, Gemini 2.5 Flash, Gemini 2.5 Flash-Lite</li>
        </ul>
        </li>
        </ol>
        <p><strong>Security and privacy:</strong></p>
        <ul>
        <li>API keys are stored <strong>locally</strong> in your browser&#39;s localStorage</li>
        <li><strong>OpenAI and Google:</strong> Keys are sent directly from your browser to their APIs</li>
        <li><strong>Anthropic (Claude):</strong> Requests go through a MaiChat proxy server (required due to browser CORS restrictions). The proxy forwards your key and request to Anthropic but doesn&#39;t store or log either</li>
        <li>Your conversation data stays between you and the AI providers</li>
        <li>Use your browser&#39;s private/incognito mode if on a shared computer</li>
        </ul>
        <h3 id="understanding-the-model-catalogue">Understanding the Model Catalogue</h3>
        <p>MaiChat comes with a pre-configured catalog of popular models. You can enable/disable models and add custom ones.</p>
        <p><strong>Opening the Model Editor:</strong></p>
        <ul>
        <li>Press <kbd>Ctrl+Shift+M</kbd> from any mode</li>
        <li>Or use the menu: <kbd>Ctrl+.</kbd> → Model Editor</li>
        </ul>
        <p><strong>What you see:</strong></p>
        <p>A table showing all available models with:</p>
        <ul>
        <li><strong>Model ID</strong> — The unique identifier (e.g., <code>gpt-5</code>, <code>claude-sonnet-4-5-20250929</code>)</li>
        <li><strong>Enabled</strong> — Whether the model appears in the model selector (<kbd>Ctrl+M</kbd>)</li>
        <li><strong>Context Window</strong> — Maximum tokens the model can handle</li>
        <li><strong>TPM/RPM/TPD</strong> — Tokens/Requests per Minute, Tokens per Day limits</li>
        </ul>
        <p><strong>Model categories:</strong></p>
        <p><strong>High-performance models</strong> (expensive, powerful):</p>
        <ul>
        <li>GPT-5 (OpenAI) — 128K context</li>
        <li>Claude Opus 4.1 (Anthropic) — 200K context</li>
        <li>Claude Sonnet 4.5 (Anthropic) — 200K context (1M beta)</li>
        <li>Gemini 2.5 Pro (Google) — 2M context</li>
        </ul>
        <p><strong>Balanced models</strong> (mid-tier):</p>
        <ul>
        <li>GPT-5 mini (OpenAI) — 128K context</li>
        <li>Gemini 2.5 Flash (Google) — 1M context</li>
        </ul>
        <p><strong>Fast/economical models</strong> (cheap, quick):</p>
        <ul>
        <li>GPT-5 nano (OpenAI) — 128K context</li>
        <li>Claude 3.5 Haiku (Anthropic) — 200K context</li>
        <li>Gemini 2.5 Flash-Lite (Google) — 1M context</li>
        </ul>
        <p><strong>Reasoning models</strong> (specialized):</p>
        <ul>
        <li>o4-mini (OpenAI) — Extended thinking time</li>
        </ul>
        <h3 id="managing-models">Managing Models</h3>
        <p><strong>Enable/disable models:</strong></p>
        <ol>
        <li>Open Model Editor (<kbd>Ctrl+Shift+M</kbd>)</li>
        <li>Click the checkbox next to a model to toggle</li>
        <li>Only enabled models appear in the model selector (<kbd>Ctrl+M</kbd>)</li>
        <li>Tip: Disable models you don&#39;t have API keys for to declutter the selector</li>
        </ol>
        <p><strong>Why disable models:</strong></p>
        <ul>
        <li>No API key for that provider</li>
        <li>Don&#39;t want to accidentally use expensive models</li>
        <li>Simplify the model selector</li>
        <li>Testing with specific model subset</li>
        </ul>
        <p><strong>Editing model parameters:</strong></p>
        <p>Click on any field to edit:</p>
        <ul>
        <li><strong>Context Window:</strong> The model&#39;s maximum capacity (get from provider docs)</li>
        <li><strong>TPM:</strong> Your plan&#39;s tokens per minute limit — <strong>See &quot;Understanding Rate Limits&quot; below</strong></li>
        <li><strong>RPM:</strong> Requests per minute (not yet enforced, set for reference)</li>
        <li><strong>TPD:</strong> Tokens per day (not yet enforced, set for reference)</li>
        </ul>
        <p><strong>Important:</strong> You must set TPM to match YOUR plan, not the model&#39;s advertised capacity. MaiChat uses TPM to calculate how much context fits in each message.</p>
        <h3 id="adding-more-models">Adding More Models</h3>
        <p>By default, MaiChat includes only the most popular and relevant models from each provider. However, you can add any other official model from OpenAI, Anthropic, or Google.</p>
        <p><strong>Important:</strong> You can only add models from the three supported providers. You cannot add models from other providers or use custom/fine-tuned models (those typically have different API endpoints).</p>
        <p><strong>How to add a model:</strong></p>
        <ol>
        <li>Open Model Editor (<kbd>Ctrl+Shift+M</kbd>)</li>
        <li>Use the <strong>Add</strong> row at the bottom</li>
        <li>Enter:<ul>
        <li><strong>Model ID</strong> — Exact API identifier (check provider&#39;s documentation)</li>
        <li><strong>Context Window</strong> — Maximum tokens (from provider specs)</li>
        <li><strong>TPM/RPM/TPD</strong> — Your plan&#39;s rate limits (see next section)</li>
        </ul>
        </li>
        <li>Press Enter or click Save</li>
        <li>The model immediately appears in your selector (<kbd>Ctrl+M</kbd>)</li>
        </ol>
        <p><strong>When to add models:</strong></p>
        <ul>
        <li>Provider releases a new model not yet in the default catalog</li>
        <li>You have beta access to an experimental model</li>
        <li>You need a specialized model (e.g., specific GPT-4 variant)</li>
        <li>Testing with different model versions</li>
        </ul>
        <p><strong>Removing models:</strong></p>
        <ul>
        <li>Click the delete icon next to models you&#39;ve added</li>
        <li>Default models (pre-configured by MaiChat) can&#39;t be deleted, only disabled</li>
        </ul>
        <h3 id="how-context-window-affects-your-work">How Context Window Affects Your Work</h3>
        <p>The <strong>context window</strong> is one of the two key parameters that determine how much history you can include in each message (the other is TPM - see next section).</p>
        <p><strong>Small context (8K-32K tokens):</strong></p>
        <ul>
        <li>Limits conversation depth</li>
        <li>Forces aggressive filtering</li>
        <li>Lower cost per request</li>
        <li>Faster responses</li>
        </ul>
        <p><strong>Medium context (128K-200K tokens):</strong></p>
        <ul>
        <li>Most modern models (GPT-5, Claude Sonnet 4.5)</li>
        <li>Comfortable for most use cases</li>
        <li>Balances depth and cost</li>
        </ul>
        <p><strong>Large context (1M-2M tokens):</strong></p>
        <ul>
        <li>Gemini models (massive windows!)</li>
        <li>Claude Sonnet 4.5 with beta header (1M)</li>
        <li>Include entire project histories</li>
        <li>Expensive per request</li>
        <li>Use when deep context is critical</li>
        </ul>
        <p><strong>Switching models changes the boundary:</strong></p>
        <p>MaiChat recalculates the context boundary when you switch models:</p>
        <ul>
        <li>Larger window → More messages fit → Boundary moves back</li>
        <li>Smaller window → Fewer messages fit → Boundary moves forward</li>
        <li>You see this instantly (dimming updates in real-time)</li>
        </ul>
        <p>Press <kbd>o</kbd> after switching models to see the new boundary.</p>
        <h3 id="understanding-rate-limits-tpm-vs-context-window">Understanding Rate Limits (TPM vs Context Window)</h3>
        <p>This is crucial to understand how MaiChat calculates what fits in each message.</p>
        <p><strong>Two different limits:</strong></p>
        <ol>
        <li><p><strong>Context Window (CW):</strong> The model&#39;s theoretical maximum capacity</p>
        <ul>
        <li>Example: GPT-5 can handle up to 128,000 tokens</li>
        <li>This is what providers advertise</li>
        </ul>
        </li>
        <li><p><strong>Tokens Per Minute (TPM):</strong> Your plan&#39;s rate limit</p>
        <ul>
        <li>Example: Your tier allows 30,000 tokens per minute</li>
        <li>This is what you&#39;re actually limited by</li>
        </ul>
        </li>
        </ol>
        <p><strong>How MaiChat calculates your limit:</strong></p>
        <p>For each message, MaiChat uses: <strong>MIN(Context Window, TPM)</strong></p>
        <p>Whichever is smaller becomes the actual constraint.</p>
        <p><strong>Why both matter:</strong></p>
        <ul>
        <li>If TPM &lt; CW (common): TPM is the bottleneck — your plan limits you before the model&#39;s capacity</li>
        <li>If CW &lt; TPM (rare): Context Window is the bottleneck — the model&#39;s capacity limits you before your plan</li>
        </ul>
        <p><strong>Example scenario (TPM is smaller):</strong></p>
        <ul>
        <li>Model: GPT-5 (CW = 128K)</li>
        <li>Your plan: TPM = 30K</li>
        <li><strong>Your actual limit per message:</strong> MIN(128K, 30K) = 30K tokens</li>
        <li>MaiChat will trim history to fit within 30K tokens</li>
        </ul>
        <p><strong>Provider differences in rate limits:</strong></p>
        <p><strong>OpenAI:</strong></p>
        <ul>
        <li>Has a single <strong>total TPM limit</strong> that applies to input tokens</li>
        <li>Your input (prompt + history) must fit within this limit</li>
        <li>Output tokens don&#39;t count toward TPM (but do count toward context window)</li>
        </ul>
        <p><strong>Anthropic (Claude):</strong></p>
        <ul>
        <li>Has <strong>separate input TPM and output TPM limits</strong></li>
        <li>Input limit: Controls how many tokens you can send (prompt + history)</li>
        <li>Output limit: Controls how many tokens the model can generate in response</li>
        <li>Both limits are enforced independently</li>
        </ul>
        <p><strong>Google (Gemini):</strong></p>
        <ul>
        <li>Uses <strong>&quot;Tokens per minute (input)&quot;</strong> limit</li>
        <li>Similar to OpenAI — only input tokens count toward TPM</li>
        <li>Very generous free tier: 250K-1M TPM depending on model</li>
        <li>Output tokens don&#39;t count toward TPM</li>
        </ul>
        <p><strong>What this means for you:</strong></p>
        <ul>
        <li><strong>OpenAI/Gemini:</strong> Set TPM to your plan&#39;s input token limit</li>
        <li><strong>Anthropic:</strong> Set TPM to your plan&#39;s input token limit (MaiChat handles output limits separately)</li>
        </ul>
        <p><strong>Setting TPM correctly:</strong></p>
        <p><strong>This is your responsibility!</strong> You must set TPM to match YOUR plan, not the model&#39;s advertised capacity.</p>
        <ol>
        <li><p>Check your plan on the provider&#39;s website:</p>
        <ul>
        <li><strong>OpenAI:</strong> platform.openai.com → Settings → Limits (look for &quot;Tokens per minute&quot;)</li>
        <li><strong>Anthropic:</strong> console.anthropic.com → Settings → Limits (look for &quot;Input tokens per minute&quot;)</li>
        <li><strong>Google:</strong> Check your tier — Free tier has very high limits (250K-1M TPM)</li>
        </ul>
        </li>
        <li><p>Open Model Editor (<kbd>Ctrl+Shift+M</kbd>)</p>
        </li>
        <li><p>Update TPM for each model to match your plan&#39;s <strong>input</strong> token limit</p>
        </li>
        </ol>
        <p><strong>Default TPM values:</strong></p>
        <p>MaiChat ships with conservative defaults that should work for most paid plans. However:</p>
        <ul>
        <li><strong>If you&#39;re on a free tier:</strong> You might need to lower TPM (except Gemini, which has generous limits)</li>
        <li><strong>If you&#39;re on a high-tier plan:</strong> You can increase TPM for better performance</li>
        </ul>
        <p><strong>RPM and TPD:</strong></p>
        <ul>
        <li><strong>RPM (Requests Per Minute):</strong> Currently not enforced by MaiChat (future feature)</li>
        <li><strong>TPD (Tokens Per Day):</strong> Currently tracked but not enforced (future feature)</li>
        <li>Set them for your own reference and future proofing</li>
        </ul>
        <h3 id="model-selection-strategy">Model Selection Strategy</h3>
        <p><strong>Daily workflow:</strong></p>
        <ul>
        <li>Use <strong>mini/flash/nano models</strong> (GPT-5 nano, Gemini 2.5 Flash-Lite, Claude 3.5 Haiku)</li>
        <li>Fast, cheap, good enough for most tasks</li>
        <li>Switch to larger models only when needed</li>
        </ul>
        <p><strong>Complex questions:</strong></p>
        <ul>
        <li>Use <strong>flagship models</strong> (GPT-5, Claude Sonnet 4.5, Gemini 2.5 Pro)</li>
        <li>Better reasoning and understanding</li>
        <li>Worth the cost for important tasks</li>
        </ul>
        <p><strong>Deep context needs:</strong></p>
        <ul>
        <li>Use <strong>Claude Sonnet 4.5</strong> (200K, 1M beta) or <strong>Gemini 2.5 Pro</strong> (2M)</li>
        <li>When you need lots of conversation history</li>
        <li>Research, analysis, long-form content</li>
        </ul>
        <p><strong>Cost optimization:</strong></p>
        <ul>
        <li>Filter aggressively with nano/flash-lite models</li>
        <li>Check message counter before sending</li>
        <li>Use <code>r10</code> or <code>r20</code> filters for quick questions</li>
        <li>Reserve flagship models for complex work</li>
        </ul>
        <p><strong>Speed optimization:</strong></p>
        <ul>
        <li>Flash-lite/nano models are significantly faster</li>
        <li>Use them for rapid iteration</li>
        <li>Switch to larger models only for final versions</li>
        </ul>
        <h3 id="best-practices">Best Practices</h3>
        <p>✓ <strong>Set up all three providers</strong> if possible — gives you flexibility and backup options<br>✓ <strong>Start with free tier</strong> (Gemini) to experiment before committing budget<br>✓ <strong>Monitor your costs</strong> using provider dashboards and Daily Stats (<kbd>Ctrl+Shift+D</kbd>)<br>✓ <strong>Disable models you don&#39;t use</strong> — keeps the selector clean<br>✓ <strong>Start with mini/flash models</strong> — upgrade to flagship only when needed<br>✓ <strong>Check the message counter</strong> before sending expensive flagship models<br>✓ <strong>Add more models</strong> as providers release new ones<br>✓ <strong>Set realistic TPM limits</strong> to control context size per message<br>✓ <strong>Press <kbd>o</kbd> after switching models</strong> to see the new context boundary</p>
      </section>

      <section id="settings">
<h2 id="settings">Settings and Tools</h2>
        <p>MaiChat provides several tools for configuration, monitoring, and data management.</p>
        <h3 id="settings">Settings</h3>
        <p>Configure app-wide behavior and appearance through the Settings panel.</p>
        <p><strong>Access:</strong> Press <kbd>Ctrl+,</kbd> from any mode, or use menu (<kbd>Ctrl+.</kbd> → Settings)</p>
        <p><strong>Settings are organized in 3 tabs:</strong></p>
        <ol>
        <li><p><strong>Spacing Tab</strong> — Visual layout controls:</p>
        <ul>
        <li>Fade Zone, Message Gap, Assistant Gap, Message Padding</li>
        <li>Meta Gap, Gutter Left/Right</li>
        <li>Inline Markdown Formatting (experimental)</li>
        <li>Adjust for more spacious or compact reading experience</li>
        </ul>
        </li>
        <li><p><strong>Scroll Tab</strong> — Animation behavior:</p>
        <ul>
        <li>Base Duration, Dynamic Scaling, Min/Max Duration, Easing</li>
        <li>Navigation Animation toggles (j/k, J/K, u/d)</li>
        <li>Disable for instant navigation or adjust for preferred feel</li>
        </ul>
        </li>
        <li><p><strong>Context Tab</strong> — Token estimation and AI request behavior:</p>
        <ul>
        <li><strong>User Request Allowance (URA):</strong> Default 600 tokens — Space reserved for your message. Higher = more room for long prompts but less history; Lower = more history but less room for your message. Adjust if you write very long or very short messages.</li>
        <li><strong>Assistant Response Allowance (ARA):</strong> Default 800 tokens — Expected response size (OpenAI only). Rarely needs adjustment.</li>
        <li><strong>Chars Per Token (CPT):</strong> Default 4 — Estimation factor. Rarely needs adjustment (works well for English).</li>
        <li><strong>Assumed User Tokens:</strong> Default 256 — Preview boundary reserve. Rarely needs adjustment.</li>
        <li><strong>Max Trim Attempts:</strong> Default 10 — Retry limit for context overflow. Rarely needs adjustment.</li>
        <li><strong>Topic Order Mode:</strong> How topics sort in Topic Selector (manual/alpha/recent)</li>
        </ul>
        </li>
        </ol>
        <p><strong>Saving:</strong></p>
        <ul>
        <li>Click &quot;Apply (Ctrl+S)&quot; or press <kbd>Ctrl+S</kbd> to save</li>
        <li>Click &quot;Cancel+Close (Esc)&quot; or press <kbd>Esc</kbd> to discard</li>
        <li>Settings stored in browser localStorage (persist across sessions)</li>
        </ul>
        <p><strong>When changes take effect:</strong></p>
        <ul>
        <li>Spacing: Immediate visual update</li>
        <li>Scroll: Next navigation action</li>
        <li>Context: Next message send (recalculates boundary)</li>
        </ul>
        <p><strong>Storage location:</strong> Settings, API keys, model catalog, and topic tree are stored in <strong>localStorage</strong>. Conversation history (message pairs) is stored in <strong>IndexedDB</strong> for better performance with large datasets.</p>
        <h3 id="daily-statistics">Daily Statistics</h3>
        <p>View basic activity breakdown for your currently filtered conversations.</p>
        <p><strong>Access:</strong> Press <kbd>Ctrl+Shift+D</kbd> from any mode, or use menu (<kbd>Ctrl+.</kbd> → Daily Stats)</p>
        <p><strong>What you see:</strong></p>
        <ul>
        <li>Date-by-date message count breakdown</li>
        <li>Total count for filtered view</li>
        <li>Simple table sorted chronologically</li>
        </ul>
        <p><strong>Features:</strong></p>
        <ul>
        <li><strong>Respects current filter</strong> — Shows stats only for visible messages</li>
        <li><strong>Keyboard navigation:</strong> j/k or arrows to navigate rows, g/G to jump to top/bottom</li>
        </ul>
        <p><strong>What it&#39;s NOT:</strong></p>
        <ul>
        <li>Not a cost tracker (no pricing/spending data)</li>
        <li>Not a detailed analytics tool (no breakdown by model/provider)</li>
        <li>Not exportable or historical (shows only current data)</li>
        </ul>
        <p><strong>When to use:</strong></p>
        <ul>
        <li>Quick activity overview</li>
        <li>Verify filter is working as expected</li>
        <li>See when you&#39;ve been most active</li>
        </ul>
        <p><strong>Note:</strong> Data comes from IndexedDB (where conversation history is stored). Clearing browser data will delete this history.</p>
        <h3 id="export-data">Export Data</h3>
        <p>Download your conversations as files for backup, sharing, or analysis.</p>
        <p><strong>How it works:</strong></p>
        <p>Command Mode syntax: <code><filter> :export <format></code></p>
        <p>Where:</p>
        <ul>
        <li><code><filter></code> — Any filter expression (or <code>*</code> for all messages)</li>
        <li><code>:export</code> — The export command</li>
        <li><code><format></code> — Optional: <code>json</code> (default), <code>md</code>, or <code>txt</code></li>
        </ul>
        <p><strong>Available formats:</strong></p>
        <ol>
        <li><p><strong>JSON (default)</strong> — Structured data with full metadata</p>
        <ul>
        <li>Command: <code>:export</code> or <code>:export json</code></li>
        <li>Output file: <code>export_chat-YYYYMMDD-HHMMSS.json</code></li>
        <li>Best for: Backup, re-importing, programmatic processing</li>
        </ul>
        </li>
        <li><p><strong>Markdown (.md)</strong> — Human-readable formatted text</p>
        <ul>
        <li>Command: <code>:export md</code></li>
        <li>Output file: <code>export_chat-YYYYMMDD-HHMMSS.md</code></li>
        <li>Best for: Reading, sharing, documentation</li>
        </ul>
        </li>
        <li><p><strong>Plain Text (.txt)</strong> — Simple unformatted text</p>
        <ul>
        <li>Command: <code>:export txt</code></li>
        <li>Output file: <code>export_chat-YYYYMMDD-HHMMSS.txt</code></li>
        <li>Best for: Minimal files, plain text editors</li>
        </ul>
        </li>
        </ol>
        <p><strong>Examples:</strong></p>
        <pre><code># Export all messages as JSON
        * :export

        # Export only starred messages
        s&gt;=2 :export

        # Export last 5 days as Markdown
        d&lt;5 :export md

        # Export specific topic as plain text
        t&#39;Python...&#39; :export txt

        # Export recent high-rated conversations
        d&lt;30 &amp; s&gt;=2 :export
        </code></pre>
        <p><strong>What gets exported:</strong></p>
        <ul>
        <li>Message pairs (user request + AI response)</li>
        <li>Timestamps, topics, models, ratings, flags</li>
        <li>Error states (if response failed)</li>
        <li>Full topic paths (e.g., &quot;Work &gt; Python &gt; Debugging&quot;)</li>
        </ul>
        <p><strong>What does NOT get exported:</strong></p>
        <ul>
        <li>In-context markers (not relevant outside app)</li>
        <li>UI state (dimming, active message, etc.)</li>
        <li>Settings or API keys</li>
        <li>Internal temporary data</li>
        </ul>
        <p><strong>JSON structure example:</strong></p>
        <pre><code class="language-json">{
          &quot;schemaVersion&quot;: &quot;1&quot;,
          &quot;app&quot;: &quot;MaiChat&quot;,
          &quot;generatedAt&quot;: &quot;2025-10-12T10:30:00Z&quot;,
          &quot;filterInput&quot;: &quot;t&#39;Python...&#39; :export&quot;,
          &quot;count&quot;: 42,
          &quot;pairs&quot;: [
            {
              &quot;id&quot;: &quot;p_123&quot;,
              &quot;createdAt&quot;: &quot;2025-10-12T08:15:00Z&quot;,
              &quot;topicPath&quot;: &quot;Work &gt; Python&quot;,
              &quot;topicId&quot;: &quot;uuid-here&quot;,
              &quot;model&quot;: &quot;gpt-5-mini&quot;,
              &quot;stars&quot;: 2,
              &quot;flagColor&quot;: &quot;blue&quot;,
              &quot;userText&quot;: &quot;How do I...?&quot;,
              &quot;assistantText&quot;: &quot;Here&#39;s how...&quot;,
              &quot;errorState&quot;: false
            }
          ]
        }
        </code></pre>
        <p><strong>When to use export:</strong></p>
        <p>✓ <strong>Regular backups</strong> — Download important conversations periodically<br>✓ <strong>Project documentation</strong> — Export completed projects as Markdown<br>✓ <strong>Sharing</strong> — Export specific topics to share with colleagues<br>✓ <strong>Analysis</strong> — Export as JSON to process with other tools<br>✓ <strong>Archiving</strong> — Save before cleaning up or browser reset<br>✓ <strong>Migration</strong> — Backup before major changes</p>
        <p><strong>Tips:</strong></p>
        <ul>
        <li><strong>Filter first</strong> — Export exactly what you need, not everything</li>
        <li><strong>Use JSON for backups</strong> — Most complete format</li>
        <li><strong>Use Markdown for sharing</strong> — Most readable for others</li>
        <li><strong>Check your filter</strong> — Verify message count before exporting</li>
        </ul>
      </section>

      <section id="errors">
<h2 id="errors">Common Errors and Solutions</h2>
        <p>When a message send fails, MaiChat displays an error badge in the message metadata with a short classification code. The full error message appears on hover. You can retry with the &quot;Re-ask&quot; button (or press <kbd>e</kbd> in View Mode) or delete the error with the &quot;Delete&quot; button (or press <kbd>w</kbd> in View Mode).</p>
        <h3 id="error-classifications">Error Classifications</h3>
        <p>MaiChat categorizes errors into 5 types based on the error message from the provider:</p>
        <p><strong>error: auth</strong></p>
        <ul>
        <li><strong>Meaning:</strong> Authentication failed — API key is missing, invalid, or expired</li>
        <li><strong>Triggers:</strong><ul>
        <li>&quot;API key&quot; in error message</li>
        <li>&quot;Unauthorized&quot; or &quot;401&quot; response</li>
        <li>&quot;Forbidden&quot; response</li>
        </ul>
        </li>
        <li><strong>How to fix:</strong><ol>
        <li>Press <kbd>Ctrl+K</kbd> to open API Keys</li>
        <li>Check that the correct API key is entered</li>
        <li>Verify the key is active on the provider&#39;s website</li>
        <li>Generate a new key if needed</li>
        <li>Make sure billing is set up (some providers require it)</li>
        </ol>
        </li>
        </ul>
        <p><strong>error: model</strong></p>
        <ul>
        <li><strong>Meaning:</strong> The model ID doesn&#39;t exist or you don&#39;t have access</li>
        <li><strong>Triggers:</strong><ul>
        <li>&quot;Model not found&quot; or &quot;unknown model&quot;</li>
        <li>&quot;Invalid model&quot; or &quot;unsupported model&quot;</li>
        <li>&quot;Model doesn&#39;t exist&quot; or &quot;deprecated model&quot;</li>
        <li>404 errors mentioning &quot;model&quot;</li>
        </ul>
        </li>
        <li><strong>How to fix:</strong><ol>
        <li>Open Model Editor (<kbd>Ctrl+Shift+M</kbd>)</li>
        <li>Check the model ID matches provider documentation exactly</li>
        <li>Some models require beta access or special enrollment</li>
        <li>Try switching to a different model from the same provider</li>
        <li>Remove the model if it&#39;s been deprecated</li>
        </ol>
        </li>
        </ul>
        <p><strong>error: quota</strong></p>
        <ul>
        <li><strong>Meaning:</strong> You&#39;ve hit a rate limit or context size limit</li>
        <li><strong>Triggers:</strong><ul>
        <li>429 status code (too many requests)</li>
        <li>&quot;Rate limit&quot; or &quot;quota&quot; in error message</li>
        <li>&quot;TPM&quot; or &quot;RPM&quot; (tokens/requests per minute)</li>
        <li>&quot;Context length exceeded&quot; or &quot;context window&quot;</li>
        </ul>
        </li>
        <li><strong>How to fix:</strong><ul>
        <li><strong>For rate limits (429/TPM/RPM):</strong><ol>
        <li>Wait 60 seconds and try again</li>
        <li>Check your plan limits on provider&#39;s website</li>
        <li>Consider upgrading your plan if this happens often</li>
        <li>Use a different model (they often have separate limits)</li>
        </ol>
        </li>
        <li><strong>For context limits:</strong><ol>
        <li>Apply a more restrictive filter to include less history</li>
        <li>Try <code>r20</code> to include only last 20 message pairs</li>
        <li>Switch to a model with larger context window</li>
        <li>Press <kbd>o</kbd> to see what&#39;s being included</li>
        <li>Check Model Editor (<kbd>Ctrl+Shift+M</kbd>) — your TPM might be too low</li>
        </ol>
        </li>
        </ul>
        </li>
        </ul>
        <p><strong>error: net</strong></p>
        <ul>
        <li><strong>Meaning:</strong> Network connection failed</li>
        <li><strong>Triggers:</strong><ul>
        <li>&quot;Network error&quot; in message</li>
        <li>&quot;Fetch failed&quot; </li>
        <li>Connection timeouts</li>
        <li>DNS resolution failures</li>
        </ul>
        </li>
        <li><strong>How to fix:</strong><ol>
        <li>Check your internet connection</li>
        <li>Try again in a moment (temporary network issue)</li>
        <li>Check if the provider&#39;s API is down (visit status page)</li>
        <li>Disable VPN if using one (might interfere)</li>
        <li>Try a different network if available</li>
        </ol>
        </li>
        </ul>
        <p><strong>error: unknown</strong></p>
        <ul>
        <li><strong>Meaning:</strong> Error doesn&#39;t match any known pattern</li>
        <li><strong>Triggers:</strong> Any error that doesn&#39;t fit the above categories</li>
        <li><strong>How to fix:</strong><ol>
        <li>Hover over error badge to read full error message</li>
        <li>Search for the error message in provider&#39;s documentation</li>
        <li>Check if it&#39;s a content policy violation</li>
        <li>Try rephrasing your request</li>
        <li>Try a different model</li>
        <li>Check browser console (F12) for additional details</li>
        </ol>
        </li>
        </ul>
        <h3 id="common-workflows">Common Workflows</h3>
        <p><strong>After an error occurs:</strong></p>
        <ol>
        <li><strong>Read the error</strong> — Hover over the error badge to see the full message</li>
        <li><strong>Retry</strong> — Press <kbd>e</kbd> (View Mode) or click the ↻ button to re-ask</li>
        <li><strong>Delete</strong> — Press <kbd>w</kbd> (View Mode) or click the ✕ button to remove the error</li>
        <li><strong>Fix and retry</strong> — Fix the underlying issue (add API key, change model, apply filter) then press <kbd>e</kbd> to re-ask</li>
        </ol>
        <p><strong>The Re-ask feature:</strong></p>
        <ul>
        <li>Copies the original user message to input field</li>
        <li>Sets the model to what was used</li>
        <li>Switches to Input Mode</li>
        <li>You can edit before resending</li>
        <li>Original error message remains until you delete it or send successfully</li>
        </ul>
        <h3 id="interface-issues">Interface Issues</h3>
        <p><strong>&quot;Keys don&#39;t respond&quot;</strong></p>
        <ul>
        <li><strong>Cause:</strong> You&#39;re in the wrong mode</li>
        <li><strong>Solution:</strong> <ol>
        <li>Check mode indicator (bottom-left: VIEW/INPUT/COMMAND)</li>
        <li>Press <kbd>Esc</kbd> to cycle through modes</li>
        <li>Or use <kbd>Ctrl+V</kbd> (View), <kbd>Ctrl+I</kbd> (Input), <kbd>Ctrl+D</kbd> (Command)</li>
        </ol>
        </li>
        </ul>
        <p><strong>&quot;Can&#39;t find a message&quot;</strong></p>
        <ul>
        <li><strong>Cause:</strong> A filter is hiding it</li>
        <li><strong>Solution:</strong><ol>
        <li>Press <kbd>Ctrl+D</kbd> to enter Command Mode</li>
        <li>Type <code>*</code> and press <kbd>Enter</kbd> to clear all filters</li>
        <li>Or check active filters shown at top of history pane</li>
        <li>Use <code>c'search term'</code> to search for specific content</li>
        </ol>
        </li>
        </ul>
        <p><strong>&quot;Modal or overlay won&#39;t close&quot;</strong></p>
        <ul>
        <li><strong>Cause:</strong> Not using the right key</li>
        <li><strong>Solution:</strong><ol>
        <li>Press <kbd>Esc</kbd> to close most overlays</li>
        <li>Or click outside the overlay</li>
        <li>For Settings/Model Editor: click &quot;Cancel&quot; or press <kbd>Esc</kbd></li>
        </ol>
        </li>
        </ul>
        <h3 id="when-all-else-fails">When All Else Fails</h3>
        <ol>
        <li><strong>Refresh the page</strong> — Sometimes the app state gets confused</li>
        <li><strong>Check browser console</strong> — Press F12 and look for error messages</li>
        <li><strong>Try a different browser</strong> — Some extensions can interfere</li>
        <li><strong>Clear browser data</strong> — Last resort (you&#39;ll lose settings/history)</li>
        <li><strong>Report the issue</strong> — Check GitHub issues or create a new one</li>
        </ol>
      </section>

      <div class="footer">
        <p><a href="index.html">← Home</a> | <a href="https://github.com/ebuyakin/maichat">GitHub</a></p>
        <p class="small">MaiChat Tutorial • Last updated October 2025</p>
      </div>

    </main>
  </div>

  <script>
    // Sidebar navigation and scroll spy
    document.addEventListener('DOMContentLoaded', () => {
      const sections = document.querySelectorAll('h2[id], h3[id], h4[id]');
      const navLinks = document.querySelectorAll('.nav-item a');
      
      // Collapsible nav items with children
      const toggles = document.querySelectorAll('.nav-item-toggle');
      toggles.forEach(toggle => {
        toggle.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          
          // Get the parent nav-item-header first, then its parent nav-item
          // This ensures we only toggle the item that owns this toggle
          const header = toggle.parentElement;
          const navItem = header.parentElement;
          
          // Only toggle if this is actually a nav-item with children
          if (navItem && navItem.classList.contains('nav-item') && navItem.classList.contains('has-children')) {
            navItem.classList.toggle('collapsed');
            
            // Save state to localStorage
            const link = navItem.querySelector(':scope > .nav-item-header > a');
            if (link) {
              const id = link.getAttribute('href').substring(1);
              const isCollapsed = navItem.classList.contains('collapsed');
              localStorage.setItem(`nav-collapsed-${id}`, isCollapsed);
            }
          }
        });
      });
      
      // Restore collapsed state from localStorage
      document.querySelectorAll('.nav-item.has-children').forEach(navItem => {
        const link = navItem.querySelector('a');
        if (link) {
          const id = link.getAttribute('href').substring(1);
          const savedState = localStorage.getItem(`nav-collapsed-${id}`);
          if (savedState === 'true') {
            navItem.classList.add('collapsed');
          }
        }
      });
      
      // Improved scroll spy - find the closest visible header
      let activeId = null;
      
      const updateActiveNav = () => {
        const scrollPos = window.scrollY + 150; // Offset for fixed header
        let currentId = null;
        let closestTop = -1;
        
        // Find the header closest to (but above) scroll position
        sections.forEach(section => {
          const top = section.offsetTop;
          if (top <= scrollPos && top > closestTop) {
            currentId = section.getAttribute('id');
            closestTop = top;
          }
        });
        
        // Only update if changed
        if (currentId && currentId !== activeId) {
          activeId = currentId;
          
          // Clear all active states first
          navLinks.forEach(link => link.classList.remove('active'));
          
          // Find the link for the current section
          const activeLink = Array.from(navLinks).find(
            link => link.getAttribute('href') === `#${currentId}`
          );
          
          if (activeLink) {
            // Check if the active link is inside .nav-sub-items of a collapsed parent
            // (Links in .nav-item-header are always visible, even if that item is collapsed)
            const subItemsList = activeLink.closest('.nav-sub-items');
            
            if (subItemsList) {
              // This link is a sub-item (h3/h4) - check if its parent section is collapsed
              const collapsedParent = subItemsList.closest('.nav-item.has-children.collapsed');
              
              if (collapsedParent) {
                // Link is hidden inside collapsed sub-items - find the nearest visible parent link
                let parentNavItem = collapsedParent;
                let parentLink = null;
                
                // Walk up the tree to find the first visible parent nav item
                while (parentNavItem) {
                  if (parentNavItem.classList.contains('nav-item') && 
                      parentNavItem.classList.contains('has-children')) {
                    parentLink = parentNavItem.querySelector(':scope > .nav-item-header > a');
                    if (parentLink) {
                      // Check if this parent's link is also hidden in collapsed sub-items
                      const parentSubItems = parentLink.closest('.nav-sub-items');
                      if (parentSubItems) {
                        const parentCollapsed = parentSubItems.closest('.nav-item.has-children.collapsed');
                        if (!parentCollapsed) {
                          // Found a visible parent - highlight it
                          parentLink.classList.add('active');
                          break;
                        }
                      } else {
                        // Parent link is in a header (always visible) - highlight it
                        parentLink.classList.add('active');
                        break;
                      }
                    }
                  }
                  // Move up to the next parent
                  parentNavItem = parentNavItem.parentElement?.closest('.nav-item.has-children');
                }
              } else {
                // Sub-item link is visible (parent is expanded) - highlight it normally
                activeLink.classList.add('active');
              }
            } else {
              // Link is in a header (h2 level) - always visible, highlight it normally
              activeLink.classList.add('active');
            }
          }
        }
      };
      
      // Update on scroll
      window.addEventListener('scroll', updateActiveNav);
      // Update on load
      updateActiveNav();
      
      // Auto-expand when clicking nav links
      navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
          // Don't prevent default - we want the anchor scroll behavior
          
          // Expand all parent collapsed items for this link
          let parentItem = link.closest('.nav-item.has-children.collapsed');
          while (parentItem) {
            parentItem.classList.remove('collapsed');
            
            // Update localStorage to reflect the expansion
            const parentLink = parentItem.querySelector(':scope > .nav-item-header > a');
            if (parentLink) {
              const id = parentLink.getAttribute('href').substring(1);
              localStorage.setItem(`nav-collapsed-${id}`, false);
            }
            
            // Move up to the next collapsed parent
            parentItem = parentItem.parentElement.closest('.nav-item.has-children.collapsed');
          }
        });
      });
      
      // Mobile menu toggle
      const menuBtn = document.querySelector('.mobile-menu-btn');
      const sidebar = document.querySelector('.sidebar');
      
      if (menuBtn) {
        menuBtn.addEventListener('click', () => {
          sidebar.classList.toggle('open');
        });
        
        // Close sidebar when clicking a link on mobile
        navLinks.forEach(link => {
          link.addEventListener('click', () => {
            if (window.innerWidth <= 1024) {
              sidebar.classList.remove('open');
            }
          });
        });
      }
    });
  </script>
</body>
</html>
