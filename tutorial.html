<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MaiChat Tutorial - Getting Started Guide</title>
  <meta name="description" content="Learn to use MaiChat: a keyboard-first interface for ChatGPT, Claude, and Gemini with topic organization and powerful filtering." />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <style>
/* MaiChat Tutorial Styles */

:root {
  --bg-main: #0a0a0a;
  --bg-alt: #1a1a1a;
  --bg-card: #111;
  --text: #e0e0e0;
  --text-dim: #999;
  --accent: #4a9eff;
  --accent-hover: #6bb0ff;
  --border: #333;
  --success: #4ade80;
  --font-ui: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-mono: 'SF Mono', 'Monaco', 'Inconsolata', 'Fira Code', 'Droid Sans Mono', 'Source Code Pro', monospace;
  --sidebar-width: 320px;
}

* { 
  margin: 0; 
  padding: 0; 
  box-sizing: border-box; 
}

html, body { 
  margin: 0; 
  padding: 0; 
  background: var(--bg-main); 
  color: var(--text); 
  scroll-behavior: smooth;
  height: 100%;
}

body { 
  font-family: var(--font-ui);
  font-size: 16px;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
  display: flex;
}

/* Sidebar Navigation */
.sidebar {
  position: fixed;
  left: 0;
  top: 0;
  bottom: 0;
  width: var(--sidebar-width);
  background: var(--bg-alt);
  border-right: 1px solid var(--border);
  overflow-y: auto;
  padding: 24px 0;
  z-index: 100;
}

.sidebar-header {
  padding: 0 24px 20px 24px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 20px;
}

.sidebar-title {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 4px;
}

.sidebar-subtitle {
  font-size: 0.85rem;
  color: var(--text-dim);
}

.sidebar-nav {
  list-style: none;
}

/* Nav items */
.nav-item {
  position: relative;
}

/* Items without children - simple link */
.nav-item:not(.has-children) > a {
  display: block;
  padding: 6px 24px;
  color: var(--text-dim);
  text-decoration: none;
  font-size: 0.95rem;
  transition: all 0.2s;
  border-left: 3px solid transparent;
}

.nav-item:not(.has-children) > a:hover {
  color: var(--text);
  background: rgba(255, 255, 255, 0.05);
}

.nav-item:not(.has-children) > a.active {
  color: var(--accent);
  background: rgba(74, 158, 255, 0.1);
  border-left-color: var(--accent);
}

/* Items with children - header with toggle */
.nav-item.has-children > .nav-item-header {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 24px 6px 16px;
  transition: background 0.2s;
}

.nav-item.has-children > .nav-item-header:hover {
  background: rgba(255, 255, 255, 0.05);
}

.nav-item-toggle {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  font-size: 1rem;
  color: var(--text-dim);
  cursor: pointer;
  user-select: none;
  transition: transform 0.2s, color 0.2s;
  flex-shrink: 0;
}

.nav-item-toggle:hover {
  color: var(--text);
}

/* Chevron rotation */
.nav-item.has-children > .nav-item-header .nav-item-toggle {
  transform: rotate(90deg); /* Down when expanded */
}

.nav-item.has-children.collapsed > .nav-item-header .nav-item-toggle {
  transform: rotate(0deg); /* Right when collapsed */
}

/* Links inside headers */
.nav-item-header a {
  flex: 1;
  color: var(--text-dim);
  text-decoration: none;
  font-size: 0.95rem;
  transition: color 0.2s;
  border-left: none;
}

.nav-item-header a:hover {
  color: var(--text);
}

.nav-item-header a.active {
  color: var(--accent);
  font-weight: 600;
}

/* Sub-items container */
.nav-sub-items {
  list-style: none;
  max-height: 2000px;
  overflow: hidden;
  transition: max-height 0.3s ease-out, opacity 0.3s;
  opacity: 1;
  padding-left: 16px;
}

.nav-item.collapsed > .nav-sub-items {
  max-height: 0;
  opacity: 0;
}

/* Nested sub-items styling */
.nav-sub-items .nav-item:not(.has-children) > a {
  padding: 5px 24px;
  font-size: 0.9rem;
}

.nav-sub-items .nav-sub-items .nav-item > a {
  padding: 4px 24px;
  font-size: 0.85rem;
  color: var(--text-dim);
}

/* Main Content */
.main-content {
  margin-left: var(--sidebar-width);
  flex: 1;
  min-width: 0;
}

.container { 
  max-width: 900px; 
  margin: 0 auto; 
  padding: 48px 48px 64px;
}

header { 
  margin-bottom: 48px;
}

h1 { 
  font-size: 2.5rem; 
  line-height: 1.2; 
  margin: 0 0 16px; 
  font-weight: 700; 
}

.subtitle { 
  color: var(--text-dim); 
  margin: 0 0 24px; 
  font-size: 1.1rem; 
}

.back-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  color: var(--text-dim);
  text-decoration: none;
  font-size: 0.9rem;
  margin-bottom: 24px;
  transition: color 0.2s;
}

.back-link:hover {
  color: var(--accent);
}

h2 { 
  margin-top: 96px; 
  padding-top: 40px; 
  border-top: 2px solid var(--border); 
  font-size: 1.75rem; 
  font-weight: 700;
  scroll-margin-top: 24px;
}

h2:first-of-type { 
  margin-top: 0;
  border-top: none;
  padding-top: 0;
}

h3 { 
  margin-top: 36px; 
  font-size: 1.25rem; 
  color: var(--accent); 
  font-weight: 600;
  scroll-margin-top: 24px;
}

h4 { 
  margin-top: 24px; 
  font-size: 1.05rem; 
  font-weight: 600; 
}

p { 
  margin: 14px 0; 
  line-height: 1.7; 
}

ul, ol { 
  margin: 12px 0 20px 24px; 
}

li { 
  margin: 10px 0; 
  line-height: 1.7; 
}

code { 
  background: var(--bg-card); 
  padding: 3px 8px; 
  border-radius: 4px; 
  font-family: var(--font-mono); 
  font-size: 0.9em; 
  color: var(--accent); 
}

kbd { 
  background: var(--bg-alt); 
  border: 1px solid var(--border); 
  padding: 3px 8px; 
  border-radius: 4px; 
  font-family: var(--font-mono); 
  font-size: 0.85em; 
  box-shadow: 0 2px 4px rgba(0,0,0,0.3); 
  white-space: nowrap; 
}

blockquote {
  border-left: 3px solid var(--accent); 
  padding: 16px 20px; 
  background: rgba(74, 158, 255, 0.1); 
  border-radius: 0 8px 8px 0; 
  margin: 20px 0; 
}

blockquote strong { 
  color: var(--accent); 
}

.info { 
  border-left: 3px solid var(--success); 
  padding: 16px 20px; 
  background: rgba(74, 222, 128, 0.1); 
  border-radius: 0 8px 8px 0; 
  margin: 20px 0; 
}

.info strong { 
  color: var(--success); 
}

.footer { 
  margin-top: 64px; 
  padding-top: 24px; 
  border-top: 1px solid var(--border); 
  color: var(--text-dim); 
  font-size: 0.95em; 
  text-align: center; 
}

.footer .small {
  font-size: 0.9em;
  margin-top: 8px;
  display: block;
}

a { 
  color: var(--accent); 
  text-decoration: none; 
  transition: color 0.2s; 
}

a:hover { 
  color: var(--accent-hover); 
}

table { 
  border-collapse: collapse; 
  width: 100%; 
  margin: 20px 0; 
}

th, td { 
  text-align: left; 
  padding: 12px; 
  border: 1px solid var(--border); 
}

th { 
  background: var(--bg-card); 
  font-weight: 600; 
}

/* Mobile Responsive */
@media (max-width: 1024px) {
  .sidebar {
    transform: translateX(-100%);
    transition: transform 0.3s;
  }
  
  .sidebar.open {
    transform: translateX(0);
  }
  
  .main-content {
    margin-left: 0;
  }
  
  .mobile-menu-btn {
    position: fixed;
    top: 16px;
    left: 16px;
    z-index: 101;
    background: var(--bg-alt);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 0.9rem;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .container {
    padding: 80px 24px 48px;
  }
}

@media (min-width: 1025px) {
  .mobile-menu-btn {
    display: none;
  }
}

@media (max-width: 768px) {
  h1 { 
    font-size: 2rem; 
  }
  
  h2 { 
    font-size: 1.5rem; 
  }
  
  .container { 
    padding: 80px 16px 48px; 
  }
}

  </style>
</head>
<body>
  <button class="mobile-menu-btn">
    <span>☰</span> Menu
  </button>
  
  <!-- Sidebar Navigation -->
  <nav class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-title">MaiChat Tutorial</div>
      <div class="sidebar-subtitle">Table of Contents</div>
    </div>
    
<ul class="sidebar-nav">
  <li class="nav-item">
    <a href="#overview">What is MaiChat</a>
  </li>
  <li class="nav-item">
    <a href="#quickstart">Quickstart (60 seconds)</a>
  </li>
  <li class="nav-item">
    <a href="#modes">Modes and where to look</a>
  </li>
  <li class="nav-item">
    <a href="#keyboard">Keyboard essentials</a>
  </li>
  <li class="nav-item">
    <a href="#topics">Topics and the topic tree</a>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#filtering">Command language (CLI filters)</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#filter-basics">Basic filters</a>
      </li>
      <li class="nav-item">
        <a href="#filter-operators">Operators and grouping</a>
      </li>
      <li class="nav-item">
        <a href="#topic-patterns-case-insensitive">Topic patterns (case-insensitive)</a>
      </li>
      <li class="nav-item">
        <a href="#model-patterns-case-insensitive">Model patterns (case-insensitive)</a>
      </li>
      <li class="nav-item">
        <a href="#date-forms">Date forms</a>
      </li>
      <li class="nav-item">
        <a href="#filter-examples">Examples you can paste</a>
      </li>
    </ul>
  </li>
  <li class="nav-item has-children">
    <div class="nav-item-header">
      <span class="nav-item-toggle">›</span>
      <a href="#context">Context management: boundary & Reading Mode</a>
    </div>
    <ul class="nav-sub-items">
      <li class="nav-item">
        <a href="#message-counter-top-right">Message counter (top-right)</a>
      </li>
      <li class="nav-item">
        <a href="#off-context-visualization-model-dependent">Off‑context visualization (model‑dependent)</a>
      </li>
    </ul>
  </li>
  <li class="nav-item">
    <a href="#workflow">New message workflow</a>
  </li>
  <li class="nav-item">
    <a href="#settings">Settings and tools</a>
  </li>
  <li class="nav-item">
    <a href="#models">Model Editor and usage limits</a>
  </li>
  <li class="nav-item">
    <a href="#troubleshooting">Troubleshooting</a>
  </li>
  <li class="nav-item">
    <a href="#tips">Tips & Best Practices</a>
  </li>
</ul>
  </nav>
  
  <!-- Main Content -->
  <div class="main-content">
    <main class="container">
      <header>
        <a href="index.html" class="back-link">← Back to Home</a>
        <h1>MaiChat Tutorial</h1>
        <p class="subtitle">Master MaiChat: keyboard-first interface for ChatGPT, Claude, and Gemini</p>
      </header>

      <section id="overview">
<h2 id="overview">What is MaiChat</h2>
        <p>MaiChat is a keyboard-centric client for working with multiple LLMs in a single, unified UI. It organizes conversations into a topic tree, supports a CLI-like filtering language, and gives you precise control over the context sent to a model.</p>
        <p>Core ideas:</p>
        <ul>
        <li>User interacts with the app in 3 different modes: Input, View, Command — each mode maps to a screen area and a set of keys.</li>
        <li>Tree-structured topics for every message, editable anytime.</li>
        <li>CLI filters for slicing history by topic, model, date, rating, color coding, errors, and content.</li>
        <li>Context management: choose exactly what the model sees.</li>
        </ul>
      </section>

      <section id="quickstart">
<h2 id="quickstart">Quickstart (60 seconds)</h2>
        <ol>
        <li><strong>First run:</strong> set your API key(s). Press <kbd>Ctrl+K</kbd> or open the menu (<kbd>Ctrl+.</kbd>) → API Keys. Keys are stored locally in your browser.</li>
        <li>You start in Input Mode with the cursor in the message box (<kbd>F1</kbd> anytime for shortcuts). Type your request.</li>
        <li>Use previously set topic and model or use <kbd>Ctrl+M</kbd> to pick a model; <kbd>Ctrl+T</kbd> to pick a topic for this message.</li>
        <li>Press <kbd>Enter</kbd> to send. The reply appears at the end of the history.</li>
        <li>Press <kbd>Esc</kbd> to switch to View Mode and browse. Use <kbd>j</kbd>/<kbd>k</kbd> to move between message parts, <kbd>g</kbd>/<kbd>G</kbd> to jump to first/last, <kbd>o</kbd> (or <kbd>Shift+O</kbd>) to jump to the context boundary, and <kbd>r</kbd> to toggle Reading Mode (centers navigation when on).</li>
        <li>Press <kbd>Enter</kbd> to switch back to Input Mode and continue typing.</li>
        </ol>
      </section>

      <section id="modes">
<h2 id="modes">Modes and where to look</h2>
        <ul>
        <li><strong>View Mode</strong> (middle zone): browsing history, rating/editing messages, jumping within the conversation.</li>
        <li><strong>Input Mode</strong> (bottom zone): composing a new message.</li>
        <li><strong>Command Mode</strong> (top zone): typing CLI filters and commands.</li>
        </ul>
        <p><strong>Switching:</strong><br><kbd>Enter</kbd>/<kbd>Esc</kbd> cycle modes contextually; <kbd>Ctrl+V</kbd>/<kbd>I</kbd>/<kbd>D</kbd> jump directly to View/Input/Command.</p>
        <p><strong>Startup behavior:</strong><br>On open/reload, MaiChat starts in Input Mode and focuses the last (newest) message part in history.</p>
      </section>

      <section id="keyboard">
<h2 id="keyboard">Keyboard essentials</h2>
        <ul>
        <li><strong>Global:</strong> <kbd>F1</kbd> (Help), <kbd>Ctrl+.</kbd> (Menu), <kbd>Ctrl+E</kbd> (Topic Editor), <kbd>Ctrl+Shift+M</kbd> (Model Editor), <kbd>Ctrl+Shift+D</kbd> (Daily Stats), <kbd>Ctrl+,</kbd> (Settings), <kbd>Ctrl+K</kbd> (API Keys).</li>
        <li><strong>View Mode navigation:</strong> <kbd>j</kbd>/<kbd>k</kbd> next/prev part; <kbd>g</kbd>/<kbd>G</kbd> first/last; <kbd>o</kbd> / <kbd>Shift+O</kbd> jump to context boundary; <kbd>r</kbd> toggle Reading Mode (center on j/k).</li>
        <li><strong>View Mode actions:</strong> <kbd>1</kbd>/<kbd>2</kbd>/<kbd>3</kbd> set star rating; <kbd>Space</kbd> clear star rating; <kbd>a</kbd> toggle color code; <kbd>e</kbd> edit &amp; resend (error row); <kbd>d</kbd> delete (error row); <kbd>Ctrl+T</kbd> change topic of active message.</li>
        <li><strong>Input Mode:</strong> <kbd>Enter</kbd> send; <kbd>Esc</kbd> back to View; <kbd>Ctrl+U</kbd> clear to start; <kbd>Ctrl+W</kbd> delete word left; <kbd>Ctrl+M</kbd> model selector; <kbd>Ctrl+T</kbd> pick topic for next message.</li>
        <li><strong>Command Mode:</strong> <kbd>Enter</kbd> apply and switch to View; <kbd>Esc</kbd> clear input; <kbd>Ctrl+P</kbd>/<kbd>N</kbd> prev/next command; <kbd>Ctrl+U</kbd> clear to start; <kbd>Ctrl+W</kbd> delete word left.</li>
        </ul>
        <blockquote>
        <p><strong>Tip:</strong> Mouse/touchpad interactions respect modes; focusing a control will switch to the correct mode to avoid conflicts.</p>
        </blockquote>
      </section>

      <section id="topics">
<h2 id="topics">Topics and the topic tree</h2>
        <ul>
        <li>Every message belongs to exactly one topic node in a hierarchical tree.</li>
        <li>You can reassign the topic of any message later (View Mode: <kbd>Ctrl+T</kbd>).</li>
        <li>Use the Topic Editor (<kbd>Ctrl+E</kbd>) to create and organize topics.</li>
        <li><strong>Strategy:</strong> start with a few broad topics (e.g., Work/Personal/Research). Split further as conversations grow.</li>
        </ul>
      </section>

      <section id="filtering">
<h2 id="filtering">Command language (CLI filters)</h2>
        <p>Use the top bar (Command Mode) to filter history. Filters are terse and quoted where needed.</p>
        <h3 id="filter-basics">Basic filters</h3>
        <ul>
        <li><strong>Topic:</strong> <code>t'work'</code> — topic match (supports paths, wildcards, descendants via …)</li>
        <li><strong>Content:</strong> <code>c'error budget'</code> — substring search; <code>*</code> is a wildcard</li>
        <li><strong>Model:</strong> <code>m'gpt-4o-mini'</code> — filter by model; wildcards allowed; bare <kbd>m</kbd> uses current model</li>
        <li><strong>Date:</strong> <code>d2025-09-08</code> — exact calendar day; or <code>d<7d</code> for relative ages (h/d/w/mo/y)</li>
        <li><strong>Recent count:</strong> <code>r30</code> — last 30 pairs by absolute recency (also <code>r1</code>, <code>r10</code>, <code>r50</code>).</li>
        <li><strong>Stars:</strong> <code>s3</code> or <code>s>=2</code> — star rating equals 3, or rating at least 2 (0..3)</li>
        <li><strong>Flagged:</strong> <kbd>b</kbd> — only pairs marked with the blue (square) flag, <kbd>g</kbd> - grey (round) flag.</li>
        <li><strong>Errors:</strong> <kbd>e</kbd> — show only rows where assistant response errored.</li>
        </ul>
        <h3 id="filter-operators">Operators and grouping</h3>
        <ul>
        <li><strong>AND:</strong> space adjacency or <code>&</code> (<code>r20 s>=2</code> ≡ <code>r20 & s>=2</code>)</li>
        <li><strong>OR:</strong> <code>|</code> or <code>+</code> (<code>m'gpt*' | m'claude*'</code>)</li>
        <li><strong>NOT:</strong> <code>!</code> (exclude) (<code>!t'Archive...'</code> or <code>!s0</code>)</li>
        <li><strong>Parentheses:</strong> <code>( ... )</code> to control order</li>
        <li><strong>Precedence:</strong> <code>()</code> &gt; <code>!</code> &gt; <code>&</code> (and adjacency) &gt; <code>|</code> and <code>+</code></li>
        </ul>
        <h3 id="topic-patterns-case-insensitive-">Topic patterns (case-insensitive)</h3>
        <ul>
        <li>Exact name or path: <code>t'AI'</code>, <code>t'AI > Transformers > GPT'</code></li>
        <li>Descendants: <code>t'AI...'</code> (AI and all children)</li>
        <li>Wildcards: <code>t'*Learning'</code>, <code>t'Machine*'</code>, <code>t'*Neural*'</code>, combinations like <code>t"*AI*..."</code></li>
        <li>Bare <kbd>t</kbd> uses the currently selected topic from the input bar</li>
        </ul>
        <h3 id="model-patterns-case-insensitive-">Model patterns (case-insensitive)</h3>
        <ul>
        <li>Exact ID: <code>m'gpt-4o'</code>, <code>m'claude-3.5'</code></li>
        <li>Wildcards: <code>m'gpt*'</code>, <code>m'*mini*'</code>, combinations like <code>(m'gpt-4*' | m'claude*')</code></li>
        <li>Bare <kbd>m</kbd> uses the currently selected model from the input bar</li>
        </ul>
        <h3 id="date-forms">Date forms</h3>
        <ul>
        <li>Absolute: <code>d2025-09-08</code> (exact local calendar day), <code>d>=2025-01-01</code></li>
        <li>Relative ages: <code>d<24h</code>, <code>d<=7d</code>, <code>d<2w</code>, <code>d<6mo</code>, <code>d<1y</code></li>
        <li>Omitted unit defaults to days: <code>d<3</code> ≡ <code>d<3d</code>, <code>d>=14</code> ≡ <code>d>=14d</code></li>
        <li>Closed interval (absolute, inclusive): <code>d>=2025-09-01 & d<=2025-09-09</code></li>
        <li>Closed interval (relative age): <code>d>=3d & d<=14d</code> (between 3 and 14 days ago, inclusive)</li>
        <li>Half-open ranges: <code>d>=2025-01-01 & d<2025-02-01</code>; <code>d<30d & d>=7d</code></li>
        </ul>
        <h3 id="filter-examples">Examples you can paste</h3>
        <ul>
        <li><code>r30 & s>=2</code> — last 30 pairs and at least 2 stars</li>
        <li><code>(b | s3) & t'Research...'</code> — flagged or 3★ under Research</li>
        <li><code>(m'gpt-4*' | m'claude*') & t'Coding...'</code> — compare models for Coding</li>
        <li><code>t'AI...' & d<7d & !e</code> — recent AI threads excluding errors</li>
        <li><code>c'bug' & c'fix' & t'Code'</code> — both words appear (use two <code>c'…'</code>) in Code</li>
        </ul>
        <blockquote>
        <p><strong>Tip:</strong> Press <kbd>F1</kbd> for the Help overlay. It includes the full key list and a compact CLI cheatsheet.<br><strong>Tip:</strong> Most interactive elements show tooltips; overlays include inline hints for their controls.</p>
        </blockquote>
      </section>

      <section id="context">
<h2 id="context">Context management: boundary & Reading Mode</h2>
        <p>MaiChat splits long exchanges into parts for precise navigation and context selection.</p>
        <ul>
        <li><kbd>o</kbd> / <kbd>Shift+O</kbd> (View Mode): jump to the current context boundary (first in‑context pair) and center it.</li>
        </ul>
        <p><strong>Reading Mode</strong> (toggle with <kbd>r</kbd>) is independent of the boundary; when enabled, each <kbd>j</kbd>/<kbd>k</kbd> navigation recenters the active part for sustained focus. Use it when reading long replies; turn it off to keep minimal scroll movement.</p>
        <p>This helps you see which parts of the conversation will be sent to the model and quickly adjust your focus.</p>
        <h3 id="message-counter-top-right-">Message counter (top-right)</h3>
        <ul>
        <li>Format <code>X/Y</code> — Predicted included / Visible pairs. X is what would go into the next request; Y is what&#39;s currently visible after filtering.</li>
        <li>Prefix <code>(-) </code> — The newest message is hidden by your current filter.</li>
        <li>Trim indicator: <code>[S-T]/Y</code> — S pairs sent after trimming, T pairs trimmed out (when the initial prediction didn&#39;t fit the model limit). Can combine with the <code>(-) </code> prefix.</li>
        <li>Tooltip shows extra details: predicted tokens, whether URA-model is active, and how many pairs were trimmed on the last send.</li>
        </ul>
        <h3 id="off-context-visualization-model-dependent-">Off‑context visualization (model‑dependent)</h3>
        <ul>
        <li>Parts beyond the current context boundary are dimmed and show an &quot;off&quot; badge in the meta line.</li>
        <li>The boundary is computed from model limits (max context) and settings (e.g., chars‑per‑token, user request allowance). Switching models can change how many pairs are &quot;in&quot; vs &quot;off&quot;.</li>
        <li>Use <kbd>o</kbd> / <kbd>Shift+O</kbd> to jump to the first in‑context pair.</li>
        </ul>
      </section>

      <section id="workflow">
<h2 id="workflow">New message workflow</h2>
        <ol>
        <li>Pick/create a topic if needed (<kbd>Ctrl+T</kbd> in Input Mode).</li>
        <li>Choose a model (<kbd>Ctrl+M</kbd>) and check settings if relevant (<kbd>Ctrl+,</kbd>).</li>
        <li>Compose and send (<kbd>Enter</kbd>). Edit-and-resend is available for error rows (<kbd>e</kbd> in View Mode).</li>
        <li>When a new reply arrives, you&#39;ll be at the end of history; use <kbd>j</kbd>/<kbd>k</kbd> to move across parts, <kbd>g</kbd>/<kbd>G</kbd> to jump to start/end; star rate if helpful (<kbd>1</kbd>/<kbd>2</kbd>/<kbd>3</kbd>, <kbd>Space</kbd> clears the rating).</li>
        </ol>
      </section>

      <section id="settings">
<h2 id="settings">Settings and tools</h2>
        <ul>
        <li><strong>Settings</strong> (<kbd>Ctrl+,</kbd>): general app preferences.</li>
        <li><strong>Topic Editor</strong> (<kbd>Ctrl+E</kbd>): manage the topic hierarchy.</li>
        <li><strong>Model Editor</strong> (<kbd>Ctrl+Shift+M</kbd>): curate models, TPM/RPM, etc.</li>
        <li><strong>API Keys</strong> (<kbd>Ctrl+K</kbd>): manage keys.</li>
        <li><strong>Daily Stats</strong> (<kbd>Ctrl+Shift+D</kbd>): daily breakdown of message stats.</li>
        </ul>
      </section>

      <section id="models">
<h2 id="models">Model Editor and usage limits</h2>
        <p>Open the Model Editor (<kbd>Ctrl+Shift+M</kbd>) to manage your model catalog and limits.</p>
        <p><strong>What you can edit per model:</strong></p>
        <ul>
        <li><strong>Enabled:</strong> include/exclude a model from the selector (<kbd>Ctrl+M</kbd>). Disabling the active model auto-switches to the next enabled one.</li>
        <li><strong>Context Window (tokens):</strong> max context size for that model (from provider docs). This drives the context boundary and trimming.</li>
        <li><strong>TPM / RPM / TPD:</strong> tokens per minute, requests per minute, tokens per day. Set these to match your subscription/plan. They&#39;re recorded for budgeting/diagnostics and future rate limiting.</li>
        </ul>
        <p><strong>Add custom models:</strong> use the Add row to define an ID and numeric limits. Base models can be disabled but not deleted; custom models can be removed.</p>
        <p><strong>How limits affect context:</strong></p>
        <ul>
        <li>The boundary is computed per active model: predicted history tokens + reserved new‑request tokens (URA) must fit the model&#39;s context window. If not, MaiChat trims oldest included pairs iteratively.</li>
        <li>Switching models can expand or shrink what&#39;s &quot;in‑context&quot; (dim/off markers update accordingly).</li>
        </ul>
        <p><strong>Related Settings</strong> (<kbd>Ctrl+,</kbd>):</p>
        <ul>
        <li><strong>userRequestAllowance (URA):</strong> total new‑message allowance (user prompt + expected assistant response). Default 600. Increase for longer prompts/replies; decrease to include more history.</li>
        <li><strong>charsPerToken (CPT):</strong> estimation factor (default 4). Higher CPT estimates fewer tokens per char → includes more history.</li>
        <li><strong>maxTrimAttempts (NTA):</strong> number of iterative trims before giving up.</li>
        </ul>
        <p><strong>Tips:</strong></p>
        <ul>
        <li>Use the message counter to spot trimming: <code>[S-T]/Y</code> means S pairs sent after trimming T pairs; <code>(-) </code> prefix means the newest pair is hidden by your filter.</li>
        <li>For deep context, pick a model with a larger context window or lower URA. For fewer trims, refine your filter (Command Mode) to include only relevant pairs.</li>
        <li>Optional: append <code>?reqdbg=1</code> to the URL to open the Request Debug overlay and inspect predicted tokens, attempts, and included pairs.</li>
        </ul>
      </section>

      <section id="troubleshooting">
<h2 id="troubleshooting">Troubleshooting</h2>
        <ul>
        <li><strong>&quot;Keys don&#39;t respond&quot;:</strong> ensure you&#39;re in the right mode. <kbd>Enter</kbd>/<kbd>Esc</kbd> to cycle, or <kbd>Ctrl+V</kbd>/<kbd>I</kbd>/<kbd>D</kbd> to jump.</li>
        <li><strong>&quot;Mouse focus feels off&quot;:</strong> the app switches modes when needed; try keyboard-first if unsure.</li>
        <li><strong>&quot;Can&#39;t find a message&quot;:</strong> use Command Mode to filter by topic (<code>t'…'</code>), model (<code>m'…'</code>), date (<code>d…</code>), or content (<code>c'…'</code>).</li>
        <li><strong>&quot;API key missing / auth error&quot;:</strong> open API Keys (<kbd>Ctrl+K</kbd>) and set the provider key (e.g., OpenAI). Then resend.</li>
        </ul>
      </section>

      <section id="tips">
<h2 id="tips">Tips & Best Practices</h2>
        <ul>
        <li><strong>Start simple:</strong> Begin with 3-5 broad topics (Work, Personal, Research). Create sub-topics as conversations grow.</li>
        <li><strong>Use Reading Mode for long replies:</strong> Press <kbd>r</kbd> to toggle. It centers the active part for easier reading.</li>
        <li><strong>Filter before sending:</strong> Use Command Mode filters to include only relevant context before making a new request.</li>
        <li><strong>Star important messages:</strong> Use <kbd>1</kbd>/<kbd>2</kbd>/<kbd>3</kbd> in View Mode to rate messages, then filter with <code>s>=2</code>.</li>
        <li><strong>Use color codes:</strong> Press <kbd>a</kbd> in View Mode to toggle blue/grey flags for quick visual organization.</li>
        <li><strong>Learn the keyboard shortcuts:</strong> Press <kbd>F1</kbd> anytime to see the help overlay. Keyboard navigation is much faster!</li>
        <li><strong>Check the context boundary:</strong> Press <kbd>o</kbd> to see what will be sent to the model. Dimmed messages are &quot;off&quot; context.</li>
        <li><strong>Experiment with filters:</strong> The command language is powerful. Try combining filters with <code>&</code>, <code>|</code>, and <code>!</code>.</li>
        </ul>
      </section>

      <div class="footer">
        <p><a href="app.html">Launch App</a> | <a href="index.html">Home</a> | <a href="https://github.com/ebuyakin/maichat">GitHub</a></p>
        <p class="small">MaiChat Tutorial • Last updated October 2025</p>
      </div>

    </main>
  </div>

  <script>
    // Sidebar navigation and scroll spy
    document.addEventListener('DOMContentLoaded', () => {
      const sections = document.querySelectorAll('h2[id], h3[id], h4[id]');
      const navLinks = document.querySelectorAll('.nav-item a');
      
      // Collapsible nav items with children
      const toggles = document.querySelectorAll('.nav-item-toggle');
      toggles.forEach(toggle => {
        toggle.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();
          const navItem = toggle.closest('.nav-item');
          navItem.classList.toggle('collapsed');
          
          // Save state to localStorage
          const link = navItem.querySelector('a');
          if (link) {
            const id = link.getAttribute('href').substring(1);
            const isCollapsed = navItem.classList.contains('collapsed');
            localStorage.setItem(`nav-collapsed-${id}`, isCollapsed);
          }
        });
      });
      
      // Restore collapsed state from localStorage
      document.querySelectorAll('.nav-item.has-children').forEach(navItem => {
        const link = navItem.querySelector('a');
        if (link) {
          const id = link.getAttribute('href').substring(1);
          const savedState = localStorage.getItem(`nav-collapsed-${id}`);
          if (savedState === 'true') {
            navItem.classList.add('collapsed');
          }
        }
      });
      
      // Highlight active section on scroll
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const id = entry.target.getAttribute('id');
            navLinks.forEach(link => {
              link.classList.remove('active');
              if (link.getAttribute('href') === `#${id}`) {
                link.classList.add('active');
                
                // Auto-expand parent items when navigating to a section
                let parentItem = link.closest('.nav-item.has-children.collapsed');
                while (parentItem) {
                  parentItem.classList.remove('collapsed');
                  parentItem = parentItem.parentElement.closest('.nav-item.has-children.collapsed');
                }
              }
            });
          }
        });
      }, {
        rootMargin: '-100px 0px -80% 0px'
      });
      
      sections.forEach(section => observer.observe(section));
      
      // Mobile menu toggle
      const menuBtn = document.querySelector('.mobile-menu-btn');
      const sidebar = document.querySelector('.sidebar');
      
      if (menuBtn) {
        menuBtn.addEventListener('click', () => {
          sidebar.classList.toggle('open');
        });
        
        // Close sidebar when clicking a link on mobile
        navLinks.forEach(link => {
          link.addEventListener('click', () => {
            if (window.innerWidth <= 1024) {
              sidebar.classList.remove('open');
            }
          });
        });
      }
    });
  </script>
</body>
</html>
